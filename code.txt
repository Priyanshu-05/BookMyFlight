CAPSTONE:
__init.py

asgi.py
setting.py :
"""
Django settings for capstone project.

Generated by 'django-admin startproject' using Django 3.1.2.

For more information on this file, see
https://docs.djangoproject.com/en/3.1/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/3.1/ref/settings/
"""

from pathlib import Path
import os

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent


# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/3.1/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = '=k3z-^1ov_hy5y%ebw(2e-npk@$#!(c8ix=+7so*hmw9m0c52*'

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True

ALLOWED_HOSTS = [
    '127.0.0.1',
    'flight-web-app.herokuapp.com',
]


# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'flight'
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'capstone.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'capstone.wsgi.application'


# Database
# https://docs.djangoproject.com/en/3.1/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}


# Password validation
# https://docs.djangoproject.com/en/3.1/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/3.1/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'Asia/Calcutta'

USE_I18N = True

USE_L10N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/3.1/howto/static-files/

STATIC_URL = '/static/'

STATIC_ROOT = os.path.join(BASE_DIR,'staticfiles')


AUTH_USER_MODEL = 'flight.User'

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

urls.py:
"""capstone URL Configuration

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/3.1/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  path('', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.urls import include, path
    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
"""
from django.contrib import admin
from django.urls import include, path
from django.contrib.staticfiles.storage import staticfiles_storage
from django.views.generic.base import RedirectView
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path('admin/', admin.site.urls),
    path('',include("flight.urls")),
    path('favicon.ico', RedirectView.as_view(url=staticfiles_storage.url('img/favicon.ico')))
] + static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)


utils.py:
from io import BytesIO
from django.http import HttpResponse
from django.template.loader import get_template

from flight.models import *
import secrets
from datetime import datetime, timedelta
from xhtml2pdf import pisa

from flight.constant import FEE

def render_to_pdf(template_src, context_dict={}):
    template = get_template(template_src)
    html  = template.render(context_dict)
    result = BytesIO()
    pdf = pisa.pisaDocument(BytesIO(html.encode("ISO-8859-1")), result)
    if not pdf.err:
        return HttpResponse(result.getvalue(), content_type='application/pdf')
    return None


def createticket(user,passengers,passengerscount,flight1,flight_1date,flight_1class,coupon,countrycode,email,mobile):
    ticket = Ticket.objects.create()
    ticket.user = user
    ticket.ref_no = secrets.token_hex(3).upper()
    for passenger in passengers:
        ticket.passengers.add(passenger)
    ticket.flight = flight1
    ticket.flight_ddate = datetime(int(flight_1date.split('-')[2]),int(flight_1date.split('-')[1]),int(flight_1date.split('-')[0]))
    ###################
    flight1ddate = datetime(int(flight_1date.split('-')[2]),int(flight_1date.split('-')[1]),int(flight_1date.split('-')[0]),flight1.depart_time.hour,flight1.depart_time.minute)
    flight1adate = (flight1ddate + flight1.duration)
    ###################
    ticket.flight_adate = datetime(flight1adate.year,flight1adate.month,flight1adate.day)
    ffre = 0.0
    if flight_1class.lower() == 'first':
        ticket.flight_fare = flight1.first_fare*int(passengerscount)
        ffre = flight1.first_fare*int(passengerscount)
    elif flight_1class.lower() == 'business':
        ticket.flight_fare = flight1.business_fare*int(passengerscount)
        ffre = flight1.business_fare*int(passengerscount)
    else:
        ticket.flight_fare = flight1.economy_fare*int(passengerscount)
        ffre = flight1.economy_fare*int(passengerscount)
    ticket.other_charges = FEE
    if coupon:
        ticket.coupon_used = coupon                     ##########Coupon
    ticket.total_fare = ffre+FEE+0.0                    ##########Total(Including coupon)
    ticket.seat_class = flight_1class.lower()
    ticket.status = 'PENDING'
    ticket.mobile = ('+'+countrycode+' '+mobile)
    ticket.email = email
    ticket.save()
    return ticket

wsgi.py:
"""
WSGI config for capstone project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/3.1/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'capstone.settings')

application = get_wsgi_application()


DATA:
add_places.py:
from bs4 import BeautifulSoup as bs
from urllib import request
import re
import pandas as pd

print("Fetching Data of Different Airports...")

# Adding top 100 airports in the world
page = request.urlopen("https://gettocenter.com/airports/top-100-airports-in-world")
soup = bs(page, features="html.parser")

column_names = ['city','airport','code','country']
df = pd.DataFrame(columns=column_names)

tr = soup.body.find_all('tr')

for r in tr:
    d = r.find_all('td')
    airport = d[1].text.strip()
    code = d[2].text.strip().upper()
    city = d[3].text.strip()
    country = d[4].text.strip()
    
    row = {
        'city': city,
        'airport': airport,
        'code': code,
        'country': country
    }
    df = df.append(row, ignore_index=True)


# Adding top 30 airports in india
page = request.urlopen("https://www.worlddata.info/asia/india/airports.php")
soup = bs(page, features="html.parser")

tr = soup.body.find_all('table')[0].find_all('tr')

for r in tr[1:]:
    d = r.find_all('td')
    airport = d[1].text.strip()
    code = d[0].text.strip().upper()
    city = d[2].text.strip()
    country = 'India'
    
    row = {
        'city': city,
        'airport': airport,
        'code': code,
        'country': country
    }
    if len(df[df['code'] == code]):
        continue
    else:
        df = df.append(row, ignore_index=True)

print("Saving data in the file airports.csv")
df.to_csv("airports.csv", index=False)

print("DONE")

airports.csv:
city,airport,code,country
Atlanta,Hartsfield–Jackson Atlanta International Airport,ATL,United States
Beijing,Beijing Capital International Airport,PEK,China
Dubai,Dubai International Airport,DXB,United Arab Emirates
Los Angeles,Los Angeles International Airport,LAX,United States
Chicago,O'Hare International Airport,ORD,United States
London,Heathrow Airport,LHR,United Kingdom
Tokyo,Haneda Airport,HND,Japan
Hong Kong,Hong Kong International Airport,HKG,Hong Kong
Shanghai,Shanghai Pudong International Airport,PVG,China
Paris,Charles de Gaulle International Airport,CDG,France
Amsterdam,Amsterdam Airport Schiphol,AMS,Netherlands
Dallas,Dallas-Fort Worth International Airport,DFW,United States
Guangzhou,Guangzhou Baiyun International Airport,CAN,China
Frankfurt,Frankfurt am Main International Airport,FRA,Germany
Istanbul,Istanbul Atatürk Airport,IST,Turkey
Delhi,Indira Gandhi International Airport,DEL,India
Jakarta,Soekarno-Hatta International Airport,CGK,Indonesia
Singapore,Singapore Changi Airport,SIN,Singapore
Seoul,Incheon International Airport,ICN,South Korea
Denver,Denver International Airport,DEN,United States

domestic_flights.csv
,origin,destination,depart_time,depart_weekday,duration,arrival_time,arrival_weekday,flight_no,airline_code,airline,economy_fare,business_fare,first_fare
0,DEL,BOM,08:00:00,2,02:10:00,10:10:00,2,G8334,G8,Go First,4589,,
1,DEL,BOM,10:55:00,2,02:15:00,13:10:00,2,G8338,G8,Go First,4589,,
2,DEL,BOM,19:45:00,2,02:15:00,22:00:00,2,G8346,G8,Go First,4589,,
3,DEL,BOM,20:50:00,2,02:15:00,23:05:00,2,G8330,G8,Go First,4589,,
4,DEL,BOM,07:20:00,5,02:15:00,09:35:00,5,SG8701,SG,SpiceJet,4813,,
5,DEL,BOM,19:45:00,5,02:15:00,22:00:00,5,SG8169,SG,SpiceJet,4882,,
6,DEL,BOM,19:45:00,6,02:15:00,22:00:00,6,SG8169,SG,SpiceJet,4882,,
7,DEL,BOM,21:40:00,2,02:15:00,23:55:00,2,SG711,SG,SpiceJet,4882,,
8,DEL,BOM,21:40:00,5,02:15:00,23:55:00,5,SG711,SG,SpiceJet,4882,,
9,DEL,BOM,07:20:00,4,02:15:00,09:35:00,4,SG8701,SG,SpiceJet,4882,,
10,DEL,BOM,21:40:00,6,02:15:00,23:55:00,6,SG711,SG,SpiceJet,4882,,
11,DEL,BOM,07:20:00,3,02:15:00,09:35:00,3,SG8701,SG,SpiceJet,4882,,
12,DEL,BOM,19:45:00,2,02:15:00,22:00:00,2,SG8169,SG,SpiceJet,4882,,
13,DEL,BOM,19:00:00,3,02:10:00,21:10:00,3,SG8709,SG,SpiceJet,4940,,

international_flights.csv:
index,origin,destination,depart_time,depart_weekday,duration,arrival_time,arrival_weekday,flight_no,airline_code,airline,economy_fare,business_fare,first_fare
0,ATL,LAX,19:05:00,2,01:45:00,20:50:00,2,NK1301,NK,Spirit Airlines,20853,,
1,ATL,LAX,19:05:00,1,01:45:00,20:50:00,1,NK1301,NK,Spirit Airlines,23590,,
2,ATL,LAX,19:05:00,5,01:45:00,20:50:00,5,NK1301,NK,Spirit Airlines,23590,,
3,ATL,LAX,19:05:00,3,01:45:00,20:50:00,3,NK1301,NK,Spirit Airlines,23590,,
4,ATL,LAX,10:16:00,4,01:44:00,12:00:00,4,NK1301,NK,Spirit Airlines,32712,,
5,ATL,LAX,19:05:00,6,01:45:00,20:50:00,6,NK1301,NK,Spirit Airlines,32712,,
6,ATL,LAX,22:46:00,6,01:34:00,00:20:00,0,DL1137,DL,Delta Airlines,44537,62648,
7,ATL,LAX,20:53:00,6,01:36:00,22:29:00,6,DL2331,DL,Delta Airlines,44537,111792,
8,ATL,LAX,17:00:00,6,01:30:00,18:30:00,6,DL383,DL,Delta Airlines,45326,,
9,ATL,LAX,12:15:00,4,01:32:00,13:47:00,4,DL2066,DL,Delta Airlines,45326,,
10,ATL,LAX,11:07:00,6,01:33:00,12:40:00,6,DL515,DL,Delta Airlines,45326,,
11,ATL,LAX,22:46:00,4,01:34:00,00:20:00,5,DL1137,DL,Delta Airlines,45326,62648,
12,ATL,LAX,08:45:00,4,01:35:00,10:20:00,4,DL345,DL,Delta Airlines,45326,62648,
13,ATL,LAX,20:53:00,4,01:36:00,22:29:00,4,DL2331,DL,Delta Airlines,45326,62648,
14,ATL,LAX,20:53:00,5,01:36:00,22:29:00,5,DL2331,DL,Delta Airlines,45326,,
15,ATL,LAX,15:10:00,4,01:38:00,16:48:00,4,DL1678,DL,Delta Airlines,45326,,
16,ATL,LAX,17:50:00,5,01:40:00,19:30:00,5,DL2864,DL,Delta Airlines,45326,,
17,ATL,LAX,16:35:00,4,01:40:00,18:15:00,4,DL335,DL,Delta Airlines,45326,62648,
18,ATL,LAX,19:30:00,6,01:40:00,21:10:00,6,DL303,DL,Delta Airlines,45326,,

FLIGHT:
migrations

static
>css 
>img 
>js 
book.js:
document.addEventListener('DOMContentLoaded', () => {
    flight_duration();
});

function flight_duration() {
    document.querySelectorAll(".duration").forEach(element => {
        let time = element.dataset.value.split(":");
        element.innerText = time[0]+"h "+time[1]+"m";
    });
}


function add_traveller() {
    let div = document.querySelector('.add-traveller-div');
    let fname = div.querySelector('#fname');
    let lname = div.querySelector('#lname');
    let gender = div.querySelectorAll('.gender');
    let gender_val = null
    if(fname.value.trim().length === 0) {
        alert("Please enter First Name.");
        return false;
    }

    if(lname.value.trim().length === 0) {
        alert("Please enter Last Name.");
        return false;
    }

    if (!gender[0].checked) {
        if (!gender[1].checked) {
            alert("Please select gender.");
            return false;
        }
        else {
            gender_val = gender[1].value;
        }
    }
    else {
        gender_val = gender[0].value;
    }

    let passengerCount = div.parentElement.querySelectorAll(".each-traveller-div .each-traveller").length;

    let traveller = `<div class="row each-traveller">
                        <div>
                            <span class="traveller-name">${fname.value} ${lname.value}</span><span>,</span>
                            <span class="traveller-gender">${gender_val.toUpperCase()}</span>
                        </div>
                        <input type="hidden" name="passenger${passengerCount+1}FName" value="${fname.value}">
                        <input type="hidden" name="passenger${passengerCount+1}LName" value="${lname.value}">
                        <input type="hidden" name="passenger${passengerCount+1}Gender" value="${gender_val}">
                        <div class="delete-traveller">
                            <button class="btn" type="button" onclick="del_traveller(this)">
                                <svg width="1.1em" height="1.1em" viewBox="0 0 16 16" class="bi bi-x-circle" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                    <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                                </svg>
                            </button>
                        </div>
                    </div>`;
    div.parentElement.querySelector(".each-traveller-div").innerHTML += traveller;
    div.parentElement.querySelector("#p-count").value = passengerCount+1;
    div.parentElement.querySelector(".traveller-head h6 span").innerText = passengerCount+1;
    div.parentElement.querySelector(".no-traveller").style.display = 'none';
    fname.value = "";
    lname.value = "";
    gender.forEach(radio => {
        radio.checked = false;
    });

    let pcount = document.querySelector("#p-count").value;
    let fare = document.querySelector("#basefare").value;
    let fee = document.querySelector("#fee").value;
    if (parseInt(pcount)!==0) {
        document.querySelector(".base-fare-value span").innerText = parseInt(fare)*parseInt(pcount);
        document.querySelector(".total-fare-value span").innerText = (parseInt(fare)*parseInt(pcount))+parseInt(fee);
    }

}

function del_traveller(btn) {
    let traveller = btn.parentElement.parentElement;
    let tvl = btn.parentElement.parentElement.parentElement.parentElement;
    let cnt = tvl.querySelector("#p-count");
    cnt.value = parseInt(cnt.value)-1;
    tvl.querySelector(".traveller-head h6 span").innerText = cnt.value;
    if(parseInt(cnt.value) <= 0) {
        tvl.querySelector('.no-traveller').style.display = 'block';
    }
    traveller.remove();
    
    let pcount = document.querySelector("#p-count").value;
    let fare = document.querySelector("#basefare").value;
    let fee = document.querySelector("#fee").value;
    if (parseInt(pcount) !== 0) {
        document.querySelector(".base-fare-value span").innerText = parseInt(fare)*parseInt(pcount);
        document.querySelector(".total-fare-value span").innerText = (parseInt(fare)*parseInt(pcount))+parseInt(fee);   
    }
}

function book_submit() {
    let pcount = document.querySelector("#p-count");
    if(parseInt(pcount.value) > 0) {
        return true;
    }
    alert("Please add atleast one passenger.")
    return false;
}

booking.js:
function popup(element) {
    let ref = element.dataset.ref;
    document.querySelector("#cancel_ticket_btn").dataset.ref = ref;
    document.querySelector(".popup").style.display = 'block';
}

function remove_popup() {
    document.querySelector(".popup").style.display = 'none';
    document.querySelector("#cancel_ticket_btn").dataset.ref = "";
}

function cancel_tkt() {
    let ref = document.querySelector("#cancel_ticket_btn").dataset.ref;
    let formData = new FormData();
    formData.append('ref',ref)
    fetch('ticket/cancel',{
        method: "POST",
        body: formData
    })
    .then(response => response.json())
    .then(response => {
        if (response.success === true) {
            remove_popup();
            document.querySelector(`[id='${ref}'] .ticket-action-div`).innerHTML = '';
            document.querySelector(`[id='${ref}'] .status-div`).innerHTML = `<div class="red">CANCELLED</div>`;
            document.querySelector(`[id='${ref}'] .booking-date-div`).innerHTML = '';
        }
        else {
            remove_popup();
            alert(`Error: ${response.error}`)
        }
    });
}

index.js:
//function esc(element) {
//    document.addEventListener('keydown', event => {
//        if(event.key === 'Escape') {
//            element.style.display = 'none';
//        }
//    });
//    element.parentElement.querySelector('input[type=text]').addEventListener("blur", () => {
//        setTimeout(() => {
//            element.style.display = 'none';
//        },80);
//    });
//}

document.addEventListener("DOMContentLoaded", () => {
    document.querySelector("#flight-from").addEventListener("input", event => {
        flight_from(event);
    });

    document.querySelector("#flight-to").addEventListener("input", event => {
        flight_to(event);
    });

    document.querySelector("#flight-from").addEventListener("focus", event => {
        flight_from(event, true);
    });

    document.querySelector("#flight-to").addEventListener("focus", event => {
        flight_to(event, true);
    });

    document.querySelectorAll('.trip-type').forEach(type => {
        type.onclick = trip_type;
    });

});


function showplaces(input) {
    let box = input.parentElement.querySelector(".places_box");
    box.style.display = 'block';
}

function hideplaces(input) {
    let box = input.parentElement.querySelector(".places_box");
    setTimeout(() => {
        box.style.display = 'none';
    }, 300);
}

function selectplace(option) {
    let input = option.parentElement.parentElement.querySelector('input[type=text]');
    input.value = option.dataset.value.toUpperCase();
    input.dataset.value = option.dataset.value;
}

function flight_to(event, focus=false) {
    let input = event.target;
    let list = document.querySelector('#places_to');
    showplaces(input);
    if(!focus) {
        input.dataset.value = '';
    }
    if(input.value.length > 0) {
        fetch('query/places/'+input.value)
        .then(response => response.json())
        .then(places => {
            list.innerHTML = '';
            places.forEach(element => {
                let div = document.createElement('div');
                div.setAttribute('class', 'each_places_to_list');
                div.classList.add('places__list');
                div.setAttribute('onclick', "selectplace(this)");
                div.setAttribute('data-value', element.code);
                div.innerText = `${element.city} (${element.country})`;
                list.append(div);
            });
        });
    }
}

function flight_from(event, focus=false) {
    let input = event.target;
    let list = document.querySelector('#places_from');
    showplaces(input);
    if(!focus) {
        input.dataset.value = '';
    }
    if(input.value.length > 0) {
        fetch('query/places/'+input.value)
        .then(response => response.json())
        .then(places => {
            list.innerHTML = '';
            places.forEach(element => {
                let div = document.createElement('div');
                div.setAttribute('class', 'each_places_from_list');
                div.classList.add('places__list');
                div.setAttribute('onclick', "selectplace(this)");
                div.setAttribute('data-value', element.code);
                div.innerText = `${element.city} (${element.country})`;
                list.append(div);
            });
        });
    }
}

function trip_type() {
    document.querySelectorAll('.trip-type').forEach(type => {
        if(type.checked) {
            if(type.value === "1") {
                document.querySelector('#return_date').value = '';
                document.querySelector('#return_date').disabled = true;
            }
            else if(type.value === "2") {
                document.querySelector('#return_date').disabled = false;
            }
        }
    })
}

function flight_search() {
    if(!document.querySelector("#flight-from").dataset.value) {
        alert("Please select flight origin.");
        return false;
    }
    if(!document.querySelector("#flight-to").dataset.value) {
        alert("Please select flight destination.");
        return false;
    }
    if(document.querySelector("#one-way").checked) {
        if(!document.querySelector("#depart_date").value) {
            alert("Please select departure date.");
            return false;
        }
    }
    if(document.querySelector("#round-trip").checked) {
        if(!document.querySelector("#depart_date").value) {
            alert("Please select departure date.");
            return false;
        }
        if(!document.querySelector("#return_date").value) {
            alert("Please select return date.");
            return false;
        }
    }
}

layout.js
payment_process.js:
document.addEventListener('DOMContentLoaded', () => {
    let ref1 = document.querySelector(".ref1").value;
    let ref2 = document.querySelector(".ref2").value;
    setTimeout(() => {
        fetch(`/flight/ticket/api/${ref1}`)
        .then(response => response.json())
        .then(ticket1 => {
            if(ref2) {
                fetch(`/flight/ticket/api/${ref2}`)
                .then(response => response.json())
                .then(ticket2 => {
                    if (ticket2.status === 'CONFIRMED') {
                        document.querySelector(".section2 .flight2 .ref").innerText = ticket2.ref;
                        document.querySelector(".section2 .flight2 .from2").innerText = ticket2.from;
                        document.querySelector(".section2 .flight2 .to2").innerText = ticket2.to;
                        document.querySelector(".flight2").style.display = 'block';
                    }
                    else {
                        throw Error(ticket2.status);
                    }
                });
            }
            if (ticket1.status === 'CONFIRMED') {
                document.querySelector(".section2 .flight1 .ref").innerText = ticket1.ref;
                document.querySelector(".section2 .flight1 .from1").innerText = ticket1.from;
                document.querySelector(".section2 .flight1 .to1").innerText = ticket1.to;
            }
            else {
                throw Error(ticket1.status);
            }
        })
        .then(() => {
            document.querySelector(".section1").style.display = 'none';
            document.querySelector(".section2").style.display = 'block';
            document.querySelector(".section3").style.display = 'none';
            //document.querySelector(".section2 svg").style.animationPlayState = 'running';
        })
        .catch(() => {
            document.querySelector(".section1").style.display = 'none';
            document.querySelector(".section2").style.display = 'none';
            document.querySelector(".section3").style.display = 'block';
        })
    }, 2000);
})

search.js:
document.addEventListener("DOMContentLoaded", () => {
    flight_duration2();
    //document.querySelector(".filter-price2 input[type=range]").addEventListener('input', filter); //filter_price
    filter_price2();
    document.querySelector(".clr-filter-div2 button").addEventListener('click', reset_filter2);
});

function flight_duration2() {
    document.querySelectorAll(".flight-stops2 .tooltiptext").forEach(element => {
        let time = element.dataset.value.split(":");
        element.innerText = time[0]+"h "+time[1]+"m";
    });
}

///////////////////////////////////////////////////////////////////////////////////////////////

function filter2(element=null) {
    //reset_filter2();
    filter_price2();
    if (element) {
        inactive2(element);
        active2(element);   
    }
    //let type = element.dataset.type;
    let start = null;
    let end = null;
    let flights = null;
    if (true) {
        if(document.querySelector(".departure-time-slot-group2 .square-box.active")) {
            start = document.querySelector(".departure-time-slot-group2 .square-box.active").dataset.start;
            end = document.querySelector(".departure-time-slot-group2 .square-box.active").dataset.end;
            flights = document.querySelectorAll("#flights_div2 .each-flight-div-box.show");
        }
        departure_slot2(flights, start, end);
    }

    flights = null;
    if (true) {
        if(document.querySelector(".arrival-time-slot-group2 .square-box.active")) {
            start = document.querySelector(".arrival-time-slot-group2 .square-box.active").dataset.start;
            end = document.querySelector(".arrival-time-slot-group2 .square-box.active").dataset.end;
            flights = document.querySelectorAll("#flights_div2 .each-flight-div-box.show");
        }
        arrival_slot2(flights, start, end);
    }
    //flights = document.querySelectorAll("#flights_div2 .each-flight-div-box.show");
}

function arrival_slot2(flights, start, end) {
    if (flights) {
        for (let i = 0; i < flights.length; i++) {
            time = flights[i].querySelector(".flight-destination-time2 .flight-time h5").innerText.split(":");
            if((parseInt(time[0]) >= parseInt(start)) && (parseInt(time[0]) < parseInt(end))) {
                //flights[i].style.display = 'block';
                flights[i].classList.add('show');
                flights[i].classList.remove('hide');
            }
            else {
                //flights[i].style.display = 'none';
                flights[i].classList.add('hide');
                flights[i].classList.remove('show');
            }
        }
    }
}
function departure_slot2(flights, start, end) {
    if (flights) {
        for (let i = 0; i < flights.length; i++) {
            time = flights[i].querySelector(".flight-origin-time .flight-time h5").innerText.split(":");
            if((parseInt(time[0]) >= parseInt(start)) && (parseInt(time[0]) < parseInt(end))) {
                //flights[i].style.display = 'block';
                flights[i].classList.add('show');
                flights[i].classList.remove('hide');
            }
            else {
                //flights[i].style.display = 'none';
                flights[i].classList.add('hide');
                flights[i].classList.remove('show');
            }
        }
    }
}

///////////////////////////////////////////////////////////////////////////////////////////////

function timeslot(slot) {
    inactive2(slot);
    active2(slot);

    let type = slot.dataset.type;
    let start = slot.dataset.start;
    let end = slot.dataset.end;
    let div = document.querySelector("#flights_div2");
    let flights = div.querySelectorAll(".each-flight-div-box");
    if (type === 'departure') {
        for (let i = 0; i < flights.length; i++) {
            time = flights[i].querySelector(".flight-origin-time .flight-time h5").innerText.split(":");
            if((parseInt(time[0]) >= parseInt(start)) && (parseInt(time[0]) < parseInt(end))) {
                flights[i].style.display = 'block';
            }
            else {
                flights[i].style.display = 'none';
            }
        }
    }
    if (type === 'arrival') {
        for (let i = 0; i < flights.length; i++) {
            time = flights[i].querySelector(".flight-destination-time2 .flight-time h5").innerText.split(":");
            if((parseInt(time[0]) >= parseInt(start)) && (parseInt(time[0]) < parseInt(end))) {
                flights[i].style.display = 'block';
            }
            else {
                flights[i].style.display = 'none';
            }
        }
    }

}

function active2(slot) {
    slot.classList.add('active');
    slot.querySelectorAll('img').forEach(image => {
        if(image.dataset.statefor === 'inactive') {
            image.style.display = 'none';
        }
        else {
            image.style.display = 'block';
        }
    });
}
function inactive2(slot) {
    if (slot) {
        slot.parentElement.querySelectorAll('.active').forEach(element => {
            element.classList.remove('active');
            element.querySelectorAll('img').forEach(image => {
                if(image.dataset.statefor === 'inactive') {
                    image.style.display = 'block';
                }
                else {
                    image.style.display = 'none';
                }
            })
        });
    }
}



function filter_price2() {
    let value = document.querySelector(".filter-price2 input[type=range]").value;
    document.querySelector(".filter-price2 .final-price-value").innerText = value;

    let div = document.querySelector("#flights_div2");
    let flights = div.querySelectorAll(".each-flight-div-box");
    for (let i = 0; i < flights.length; i++) {
        if (flights[i].querySelector(".flight-price span").innerText > parseInt(value)) {
            //flights[i].style.display = 'none';
            flights[i].classList.add('hide');
            flights[i].classList.remove('show');
        }
        else {
            //flights[i].style.display = 'block';
            flights[i].classList.add('show');
            flights[i].classList.remove('hide');
        }
    }
    
}

function reset_filter2() {
    document.querySelectorAll('.time-slot2').forEach(slot => {
        inactive2(slot.querySelector(".square-box.active"));
    });
    let max = document.querySelector(".filter-price2 input[type=range]").getAttribute('max');
    document.querySelector(".filter-price2 input[type=range]").value = max;
    document.querySelector(".filter-price2 .final-price-value").innerText = max;

    let flights = document.querySelector("#flights_div2").querySelectorAll(".each-flight-div-box");
    for (let i = 0; i < flights.length; i++) {
            //flights[i].style.display = 'block';
            flights[i].classList.add('show');
            flights[i].classList.remove('hide');
    }
}


search2.js:
document.addEventListener("DOMContentLoaded", () => {
    flight_duration();
    //document.querySelector(".filter-price input[type=range]").addEventListener('input', filter); //filter_price
    filter_price();
    document.querySelector(".clr-filter-div button").addEventListener('click', reset_filter);

    initial_click();
    tab_change();
    flight_select();

    //document.querySelector(".filter-price2 input[type=range]").addEventListener('input', filter); //filter_price
    if (document.querySelector('#trip-identifier').value === '2') {
        flight_duration2();
        filter_price2();
        document.querySelector(".clr-filter-div2 button").addEventListener('click', reset_filter2);
    }
});

function flight_duration() {
    document.querySelectorAll(".flight-stops .tooltiptext").forEach(element => {
        let time = element.dataset.value.split(":");
        element.innerText = time[0]+"h "+time[1]+"m";
    });
}

function flight_duration2() {
    document.querySelectorAll(".flight-stops2 .tooltiptext").forEach(element => {
        let time = element.dataset.value.split(":");
        element.innerText = time[0]+"h "+time[1]+"m";
    });
}


function filter(element=null) {
    //reset_filter();
    filter_price();
    if (element) {
        inactive(element);
        active(element);   
    }
    //let type = element.dataset.type;
    let start = null;
    let end = null;
    let flights = null;
    if (true) {
        if(document.querySelector(".departure-time-slot-group .square-box.active")) {
            start = document.querySelector(".departure-time-slot-group .square-box.active").dataset.start;
            end = document.querySelector(".departure-time-slot-group .square-box.active").dataset.end;
            flights = document.querySelectorAll("#flights_div .each-flight-div-box.show");
        }
        departure_slot(flights, start, end);
    }

    flights = null;
    if (true) {
        if(document.querySelector(".arrival-time-slot-group .square-box.active")) {
            start = document.querySelector(".arrival-time-slot-group .square-box.active").dataset.start;
            end = document.querySelector(".arrival-time-slot-group .square-box.active").dataset.end;
            flights = document.querySelectorAll("#flights_div .each-flight-div-box.show");
        }
        arrival_slot(flights, start, end);
    }
    //flights = document.querySelectorAll("#flights_div .each-flight-div-box.show");
}


function filter2(element=null) {
    //reset_filter2();
    filter_price2();
    if (element) {
        inactive2(element);
        active2(element);   
    }
    //let type = element.dataset.type;
    let start = null;
    let end = null;
    let flights = null;
    if (true) {
        if(document.querySelector(".departure-time-slot-group2 .square-box.active")) {
            start = document.querySelector(".departure-time-slot-group2 .square-box.active").dataset.start;
            end = document.querySelector(".departure-time-slot-group2 .square-box.active").dataset.end;
            flights = document.querySelectorAll("#flights_div2 .each-flight-div-box.show");
        }
        departure_slot2(flights, start, end);
    }

    flights = null;
    if (true) {
        if(document.querySelector(".arrival-time-slot-group2 .square-box.active")) {
            start = document.querySelector(".arrival-time-slot-group2 .square-box.active").dataset.start;
            end = document.querySelector(".arrival-time-slot-group2 .square-box.active").dataset.end;
            flights = document.querySelectorAll("#flights_div2 .each-flight-div-box.show");
        }
        arrival_slot2(flights, start, end);
    }
    //flights = document.querySelectorAll("#flights_div2 .each-flight-div-box.show");
}


function arrival_slot(flights, start, end) {
    if (flights) {
        for (let i = 0; i < flights.length; i++) {
            time = flights[i].querySelector(".flight-destination-time .flight-time h5").innerText.split(":");
            if((parseInt(time[0]) >= parseInt(start)) && (parseInt(time[0]) < parseInt(end))) {
                //flights[i].style.display = 'block';
                flights[i].classList.add('show');
                flights[i].classList.remove('hide');
            }
            else {
                //flights[i].style.display = 'none';
                flights[i].classList.add('hide');
                flights[i].classList.remove('show');
            }
        }
    }
}
function departure_slot(flights, start, end) {
    if (flights) {
        for (let i = 0; i < flights.length; i++) {
            time = flights[i].querySelector(".flight-origin-time .flight-time h5").innerText.split(":");
            if((parseInt(time[0]) >= parseInt(start)) && (parseInt(time[0]) < parseInt(end))) {
                //flights[i].style.display = 'block';
                flights[i].classList.add('show');
                flights[i].classList.remove('hide');
            }
            else {
                //flights[i].style.display = 'none';
                flights[i].classList.add('hide');
                flights[i].classList.remove('show');
            }
        }
    }
}


function arrival_slot2(flights, start, end) {
    if (flights) {
        for (let i = 0; i < flights.length; i++) {
            time = flights[i].querySelector(".flight-destination-time2 .flight-time h5").innerText.split(":");
            if((parseInt(time[0]) >= parseInt(start)) && (parseInt(time[0]) < parseInt(end))) {
                //flights[i].style.display = 'block';
                flights[i].classList.add('show');
                flights[i].classList.remove('hide');
            }
            else {
                //flights[i].style.display = 'none';
                flights[i].classList.add('hide');
                flights[i].classList.remove('show');
            }
        }
    }
}
function departure_slot2(flights, start, end) {
    if (flights) {
        for (let i = 0; i < flights.length; i++) {
            time = flights[i].querySelector(".flight-origin-time .flight-time h5").innerText.split(":");
            if((parseInt(time[0]) >= parseInt(start)) && (parseInt(time[0]) < parseInt(end))) {
                //flights[i].style.display = 'block';
                flights[i].classList.add('show');
                flights[i].classList.remove('hide');
            }
            else {
                //flights[i].style.display = 'none';
                flights[i].classList.add('hide');
                flights[i].classList.remove('show');
            }
        }
    }
}


function timeslot(slot) {
    inactive(slot);
    active(slot);

    let type = slot.dataset.type;
    let start = slot.dataset.start;
    let end = slot.dataset.end;
    let div = document.querySelector("#flights_div");
    let flights = div.querySelectorAll(".each-flight-div-box");
    if (type === 'departure') {
        for (let i = 0; i < flights.length; i++) {
            time = flights[i].querySelector(".flight-origin-time .flight-time h5").innerText.split(":");
            if((parseInt(time[0]) >= parseInt(start)) && (parseInt(time[0]) < parseInt(end))) {
                flights[i].style.display = 'block';
            }
            else {
                flights[i].style.display = 'none';
            }
        }
    }
    if (type === 'arrival') {
        for (let i = 0; i < flights.length; i++) {
            time = flights[i].querySelector(".flight-destination-time .flight-time h5").innerText.split(":");
            if((parseInt(time[0]) >= parseInt(start)) && (parseInt(time[0]) < parseInt(end))) {
                flights[i].style.display = 'block';
            }
            else {
                flights[i].style.display = 'none';
            }
        }
    }

}

function active(slot) {
    slot.classList.add('active');
    slot.querySelectorAll('img').forEach(image => {
        if(image.dataset.statefor === 'inactive') {
            image.style.display = 'none';
        }
        else {
            image.style.display = 'block';
        }
    });
}
function inactive(slot) {
    if (slot) {
        slot.parentElement.querySelectorAll('.active').forEach(element => {
            element.classList.remove('active');
            element.querySelectorAll('img').forEach(image => {
                if(image.dataset.statefor === 'inactive') {
                    image.style.display = 'block';
                }
                else {
                    image.style.display = 'none';
                }
            })
        });
    }
}


/////////////////////////////
function active2(slot) {
    slot.classList.add('active');
    slot.querySelectorAll('img').forEach(image => {
        if(image.dataset.statefor === 'inactive') {
            image.style.display = 'none';
        }
        else {
            image.style.display = 'block';
        }
    });
}
function inactive2(slot) {
    if (slot) {
        slot.parentElement.querySelectorAll('.active').forEach(element => {
            element.classList.remove('active');
            element.querySelectorAll('img').forEach(image => {
                if(image.dataset.statefor === 'inactive') {
                    image.style.display = 'block';
                }
                else {
                    image.style.display = 'none';
                }
            })
        });
    }
}
/////////////////////////////


function filter_price() {
    let value = document.querySelector(".filter-price input[type=range]").value;
    document.querySelector(".filter-price .final-price-value").innerText = value;

    let div = document.querySelector("#flights_div");
    let flights = div.querySelectorAll(".each-flight-div-box");
    for (let i = 0; i < flights.length; i++) {
        if (flights[i].querySelector(".flight-price span").innerText > parseInt(value)) {
            //flights[i].style.display = 'none';
            flights[i].classList.add('hide');
            flights[i].classList.remove('show');
        }
        else {
            //flights[i].style.display = 'block';
            flights[i].classList.add('show');
            flights[i].classList.remove('hide');
        }
    }
    
}

function reset_filter() {
    document.querySelectorAll('.time-slot').forEach(slot => {
        inactive(slot.querySelector(".square-box.active"));
    });
    let max = document.querySelector(".filter-price input[type=range]").getAttribute('max');
    document.querySelector(".filter-price input[type=range]").value = max;
    document.querySelector(".filter-price .final-price-value").innerText = max;

    let flights = document.querySelector("#flights_div").querySelectorAll(".each-flight-div-box");
    for (let i = 0; i < flights.length; i++) {
            //flights[i].style.display = 'block';
            flights[i].classList.add('show');
            flights[i].classList.remove('hide');
    }
}







////////////////////////////////
function filter_price2() {
    let value = document.querySelector(".filter-price2 input[type=range]").value;
    document.querySelector(".filter-price2 .final-price-value").innerText = value;

    let div = document.querySelector("#flights_div2");
    let flights = div.querySelectorAll(".each-flight-div-box");
    for (let i = 0; i < flights.length; i++) {
        if (flights[i].querySelector(".flight-price span").innerText > parseInt(value)) {
            //flights[i].style.display = 'none';
            flights[i].classList.add('hide');
            flights[i].classList.remove('show');
        }
        else {
            //flights[i].style.display = 'block';
            flights[i].classList.add('show');
            flights[i].classList.remove('hide');
        }
    }
    
}

function reset_filter2() {
    document.querySelectorAll('.time-slot2').forEach(slot => {
        inactive2(slot.querySelector(".square-box.active"));
    });
    let max = document.querySelector(".filter-price2 input[type=range]").getAttribute('max');
    document.querySelector(".filter-price2 input[type=range]").value = max;
    document.querySelector(".filter-price2 .final-price-value").innerText = max;

    let flights = document.querySelector("#flights_div2").querySelectorAll(".each-flight-div-box");
    for (let i = 0; i < flights.length; i++) {
            //flights[i].style.display = 'block';
            flights[i].classList.add('show');
            flights[i].classList.remove('hide');
    }
}

////////////////////////////////





function trip_type_flight(element) {
    if(element.dataset.trip_type === '1') {
        document.querySelector(".query-result-div-2").style.display = 'none';
        document.querySelector(".query-result-div").style.display = 'block';
        //element.classList.add('active-div');
        //document.querySelector('#flight2-btn-div').classList.remove('active-div');
    }
    else if(element.dataset.trip_type === '2') {
        document.querySelector(".query-result-div").style.display = 'none';
        document.querySelector(".query-result-div-2").style.display = 'block';
        //element.classList.add('active-div');
        //document.querySelector('#flight1-btn-div').classList.remove('active-div');
    }
}



function flight_select() {
    document.querySelectorAll(".flight1-radio").forEach(radio => {
        radio.addEventListener('click', e => {
            document.querySelectorAll('#flt1').forEach(flt1 => {
                flt1.value = e.target.value;
            });
            document.querySelector("#select-f1-plane").innerText = e.target.dataset.plane;
            document.querySelector("#select-f1-depart").innerText = e.target.dataset.depart;
            document.querySelector("#select-f1-arrive").innerText = e.target.dataset.arrive;
            document.querySelector("#select-f1-fare").innerText = e.target.dataset.fare;
            document.querySelector("#select-total-fare").innerText = parseInt(e.target.dataset.fare) + parseInt(document.querySelector("#select-f2-fare").innerText);
            document.querySelector("#select-total-fare-media").innerText = parseInt(e.target.dataset.fare) + parseInt(document.querySelector("#select-f2-fare").innerText);
        });
    });
    document.querySelectorAll(".flight2-radio").forEach(radio => {
        radio.addEventListener('click', e => {
            document.querySelectorAll('#flt2').forEach(flt2 => {
                flt2.value = e.target.value;
            })
            document.querySelector("#select-f2-plane").innerText = e.target.dataset.plane;
            document.querySelector("#select-f2-depart").innerText = e.target.dataset.depart;
            document.querySelector("#select-f2-arrive").innerText = e.target.dataset.arrive;
            document.querySelector("#select-f2-fare").innerText = e.target.dataset.fare;
            document.querySelector("#select-total-fare").innerText = parseInt(e.target.dataset.fare) + parseInt(document.querySelector("#select-f1-fare").innerText);
            document.querySelector("#select-total-fare-media").innerText = parseInt(e.target.dataset.fare) + parseInt(document.querySelector("#select-f1-fare").innerText);
        });
    });
}


//a.dispatchEvent(new Event('click', { 'bubbles': true }));


function media_click(element) {
    if (window.matchMedia("(max-width: 376px)").matches) {
        if (document.querySelector('#trip-identifier').value === '1') {
            element.querySelector('.o-b').click();
        }
        else {
            element.querySelector('.r-b').click();
            element.parentElement.parentElement.querySelectorAll('.blue').forEach(flt => {
                flt.classList.remove('blue');
            });
            element.classList.add('blue');
        }
    }
    else {
        return;
    }
}

function initial_click() {
    if (window.matchMedia("(max-width: 376px)").matches) {
        if (document.querySelector('#trip-identifier').value === '2'){
            document.querySelector(".query-result-div .each-flight-div").classList.add('blue');
            document.querySelector(".query-result-div-2 .each-flight-div").classList.add('blue');
        }
    }
}


function close_filter(element) {
    element.parentElement.parentElement.style.display = 'none';
}


function show_filter() {
    if(Boolean(document.querySelector(".query-result-div-2"))) {
        let r1 = document.querySelector(".query-result-div");
        let r2 = document.querySelector(".query-result-div-2");
        if(r2.style.display === 'none') {
            r1.querySelector(".filter-div").style.display = 'block';
            r2.querySelector(".filter-div").style.display = 'none';
        }
        else {
            r2.querySelector(".filter-div").style.display = 'block';
            r1.querySelector(".filter-div").style.display = 'none';
        }
    }
    else {
        document.querySelector(".query-result-div .filter-div").style.display = 'block';
    }
}














function tab_change() {
    var tabs = $('.tabs');
    var selector = $('.tabs').find('a').length;
    //var selector = $(".tabs").find(".selector");
    var activeItem = tabs.find('.active-div');
    var activeWidth = activeItem.innerWidth();
    $(".selector").css({
    "left": activeItem.position.left + "px", 
    "width": activeWidth + "px"
    });

    $(".tabs").on("click","a",function(e){
    e.preventDefault();
    $('.tabs a').removeClass("active-div");
    $(this).addClass('active-div');
    var activeWidth = $(this).innerWidth();
    var itemPos = $(this).position();
    $(".selector").css({
        "left":itemPos.left + "px", 
        "width": activeWidth + "px"
    });
    setTimeout(() => {trip_type_flight(e.target);},400);
    });
}

signin.js:
document.addEventListener("DOMContentLoaded", () => {

    document.querySelectorAll(".inp").forEach(input => {
        input.addEventListener('input', () => {
            if ((document.querySelector('.usrnm').value.length === 0) || (document.querySelector('.pswd').value.length === 0)) {
                document.querySelector('input[type="submit"]').disabled = true;
            }
            else {
                document.querySelector('input[type="submit"]').disabled = false;
            }
        });
    });
})

signup.js:
document.addEventListener("DOMContentLoaded", () => {
    let check = [false,false,false,false,false,false];
    document.querySelectorAll(".inp").forEach(input => {
        input.addEventListener('input', () => {

            if(input.classList.contains('usrname')){
                if(input.value.trim().length !== 0) {check[0]=true;}
                else{check[0] = false;}
            }
            if(input.classList.contains('fname')){
                if(input.value.trim().length !== 0) {check[1]=true;}
                else{check[1] = false;}
            }
            if(input.classList.contains('lname')){
                if(input.value.trim().length !== 0) {check[2]=true;}
                else{check[2] = false;}
            }
            if(input.classList.contains('pswd')){
                document.querySelector('.cpswd').value = "";
                document.querySelector('.cpswd').parentElement.querySelector('span').innerText = "";
                check[4] = false;
                if(input.value.trim().length !== 0) {check[3]=true;}
                else{check[3] = false;}
            }
            if(input.classList.contains('cpswd')){
                if(input.value.trim().length !== 0) {
                    if(input.value !== document.querySelector('.pswd').value) {
                        input.parentElement.querySelector('span').innerText = "Password must match";
                        check[4] = false;
                    }
                    else {
                        input.parentElement.querySelector('span').innerText = "";
                        check[4]=true;
                    }
                }
                else{check[4] = false;}
            }
            if(input.classList.contains('email')){
                if(input.value.trim().length !== 0) {check[5]=true;}
                else{check[5] = false;}
            }

            let i;
            for(i=0;i<6;i++) {
                if(!check[i]) {
                    break;
                }
            }

            if(i===6) {
                document.querySelector('input[type="submit"]').disabled = false;
            }
            else {
                document.querySelector('input[type="submit"]').disabled = true;
            }

        });
    });
    document.querySelectorAll('.custom-file-input').forEach(element => {
        element.addEventListener("change", event => {
            if(event.target.files[0]) {
                event.target.parentElement.querySelector('.custom-file-label').innerText = event.target.files[0].name;
            }
            else {
                if(event.target.id == 'profile') {
                    event.target.parentElement.querySelector('.custom-file-label').innerHTML = `<span style="color: #6c757d;">Choose profile picture<span>`;
                }
                else if(event.target.id == 'cover') {
                    event.target.parentElement.querySelector('.custom-file-label').innerHTML = `<span style="color: #6c757d;">Choose cover picture<span>`;
                }
            }
        });
    });
    //document.querySelector('.cpswd').addEventListener('input', event => {
    //    event.target.addEventListener('input', () => {
    //        if(event.target.value !== document.querySelector('.pswd').value) {
    //            event.target.parentElement.querySelector('span').innerText = "Password must match";
    //        }
    //        else {
    //            event.target.parentElement.querySelector('span').innerText = "";
    //            document.querySelector('input[type="submit"]').disabled = true;
    //        }
    //    });
    //});
});

>templates 
about.html
{% extends 'flight/layout.html' %}

{% load static %}

{% block head %}
    <title>Terms and Conditions | Flight</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/privacy-policy.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/about.css' %}">
{% endblock head %}

{% block body %}
    <section class="privacybanner-section">
        <img src="{% static 'img/about-us.png' %}" alt="Privacy Policy" class="privacybannerimg">
    </section>
    <section class="section section1">
        <div class="container">
            <h1>We manage your trip, so you can live the destination.</h1>
            <p>Back in the 90s, booking a ticket meant going all the way to the airport and standing in long airport queues waiting for your turn. Then came the internet, and everything changed. People could book their tickets online. Despite ongoing restrictions, travel has become more affordable than ever before. 2018 saw approximately 2 billion trips by Indian travellers.</p>
            <p>However, the travel experience has remained largely unchanged - travel is still chaotic and uncertain. People still have bad trips.</p>
            <p>We discovered that this is largely due to information asymmetry. Travellers generally have to work hard to find information that concerns their trip. Travel is very information rich, but the information resides with different stakeholders and often doesn't reach the traveller in time - thus resulting in frustration, anger, and unpleasantness.</p>
            <p>Today, we make bookings without a clear idea of what our trip is going to be like - what time we’ll leave home, what time we’ll reach our destination, and how comfortable we’ll be while we get this trip. On the day of the trip, we still frantically search for a cab, get nervous when we encounter traffic, and run to the boarding gate to get there on-time.</p>
            <p>We felt that there's got to be a better way. So, we built Blinctrip - your personal travel assistant that watches your trip experience and mindfully delivers the right information to you at the right time. That means no more running.</p>
            <p>Our goal is to help you have a great trip each time. We’re going for it.</p>
        </div>
    </section>
{% endblock%}

book.html
{% extends 'flight/layout.html' %}

{% load static %}

{% block head %}
    <title>Book | Flight</title>
    <link rel="stylesheet" href="{% static 'css/book_style.css' %}">
    <script type="text/javascript" src="{% static 'js/book.js' %}"></script>
{% endblock %}

{% block body %}
    <section class="section section1">
        <form action="{% url 'book' %}" onsubmit="return book_submit()" method="POST">
            {% csrf_token %}
            <input type="hidden" name="flight1" value="{{flight1.id}}">
            <input type="hidden" name="flight1Date" value='{{flight1ddate | date:"d-m-Y"}}'>
            <input type="hidden" name="flight1Class" value="{{seat}}">
            {% if flight2 %}
                <input type="hidden" name="flight2" value="{{flight2.id}}">
                <input type="hidden" name="flight2Class" value="{{seat}}">
                <input type="hidden" name="flight2Date" value='{{flight2ddate | date:"d-m-Y"}}'>
            {% endif %}
            <div class="row main-row">
                <div class="col-8">
                <div class="ticket-details">
                    <h5>Ticket Details</h5>
                    <hr>
                    <div class="media-airline">
                        <div>
                            <div class="brand">{{flight1.airline}}</div>
                            <div>&nbsp;&middot;&nbsp;</div>
                            <div class="plane-name">{{flight1.plane}}</div>
                            <div>&nbsp;&middot;&nbsp;</div>
                            <div class="plane-name">{{seat}}</div>
                        </div>
                    </div>
                    <div class="row ticket-details-div">
                        <div class="col-3 airline-name">
                            <div class="brand">{{flight1.airline}}</div>
                            <div class="plane-name">{{flight1.plane}}</div>
                        </div>
                        <div class="col-3 depart-time">
                            <div class="time">{{flight1.depart_time | time:'H:i'}}</div>
                            <div class="date ddate" data-value='{{flight1ddate | date:"d-m-Y"}}'>{{flight1ddate | date:"D, d M y"}}</div>
                            <div class="place">{{flight1.origin.city}}</div>
                            <div class="airport">{{flight1.origin.airport}}</div>
                        </div>
                        <div class="col-3 time-details">
                            <div class="duration" data-value="{{flight1.duration}}"></div>
                        </div>
                        <div class="col-3 arrival-time">
                            <div class="time">{{flight1.arrival_time | time:'H:i'}}</div>
                            <div class="date adate" data-value='{{flight1adate | date:"d-m-Y"}}'>{{flight1adate | date:"D, d M y"}}</div>
                            <div class="place">{{flight1.destination.city}}</div>
                            <div class="airport">{{flight1.destination.airport}}</div>
                        </div>
                    </div>
                    {% if flight2 %}
                        <!--Round Trip-->
                        <div style="padding: 0 15px;" class="round-seperator"><hr style="border-top: 0.5px dashed rgba(0,0,0,.1);"></div>
                        <!--/Round Trip-->
                        <div class="media-airline">
                            <div>
                                <div class="brand">{{flight2.airline}}</div>
                                <div>&nbsp;&middot;&nbsp;</div>
                                <div class="plane-name">{{flight2.plane}}</div>
                                <div>&nbsp;&middot;&nbsp;</div>
                                <div class="plane-name">{{seat}}</div>
                            </div>
                        </div>
                        <div class="row ticket-details-div">
                            <div class="col-3 airline-name">
                                <div class="brand">{{flight2.airline}}</div>
                                <div class="plane-name">{{flight2.plane}}</div>
                            </div>
                            <div class="col-3 depart-time">
                                <div class="time">{{flight2.depart_time | time:'H:i'}}</div>
                                <div class="date ddate">{{flight2ddate | date:"D, d M y"}}</div>
                                <div class="place">{{flight2.origin.city}}</div>
                                <div class="airport">{{flight2.origin.airport}}</div>
                            </div>
                            <div class="col-3 time-details">
                                <div class="duration" data-value="{{flight2.duration}}"></div>
                            </div>
                            <div class="col-3 arrival-time">
                                <div class="time">{{flight2.arrival_time | time:'H:i'}}</div>
                                <div class="date adate">{{flight2adate | date:"D, d M y"}}</div>
                                <div class="place">{{flight2.destination.city}}</div>
                                <div class="airport">{{flight2.destination.airport}}</div>
                            </div>
                        </div>
                    {% endif %}
                    <hr>
                    <div class="baggage-details">

                        <svg width="1em" height="1.5em" viewBox="0 3 16 16" class="bi bi-bag" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M8 1a2.5 2.5 0 0 0-2.5 2.5V4h5v-.5A2.5 2.5 0 0 0 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5H2z"/>
                        </svg> 

                        30 Kgs Check-in, 7 Kgs Cabin
                    </div>
                </div>
                <div class="traveller-details">
                    <div class="traveller-head">
                        <h5>Contact Information</h5>
                    </div>
                    <hr>
                    
                    <div class="row contact-details-div">
                        <div class="row form-group">
                            <!--<div class="input-group col">
                                <div class="input-group-prepend">
                                    
                                </div>
                            </div>-->
                            <div class="col-3 ci">
                                Country Code
                                <select name="countryCode" class="custom-select">
                                    <option data-countryCode="IN" value="91">India (+91)</option>
                                    <option data-countryCode="DZ" value="213">Algeria (+213)</option>
                                    <option data-countryCode="AD" value="376">Andorra (+376)</option>
                                    <option data-countryCode="AO" value="244">Angola (+244)</option>
                                    <option data-countryCode="AI" value="1264">Anguilla (+1264)</option>
                                    <option data-countryCode="AG" value="1268">Antigua &amp; Barbuda (+1268)</option>
                                    <option data-countryCode="AR" value="54">Argentina (+54)</option>
                                    <option data-countryCode="AM" value="374">Armenia (+374)</option>
                                    <option data-countryCode="AW" value="297">Aruba (+297)</option>
                                    <option data-countryCode="AU" value="61">Australia (+61)</option>
                                    <option data-countryCode="AT" value="43">Austria (+43)</option>
                                    <option data-countryCode="AZ" value="994">Azerbaijan (+994)</option>
                                    <option data-countryCode="BS" value="1242">Bahamas (+1242)</option>
                                    <option data-countryCode="BH" value="973">Bahrain (+973)</option>
                                    <option data-countryCode="BD" value="880">Bangladesh (+880)</option>
                                    <option data-countryCode="BB" value="1246">Barbados (+1246)</option>
                                    <option data-countryCode="BY" value="375">Belarus (+375)</option>
                                    <option data-countryCode="BE" value="32">Belgium (+32)</option>
                                    <option data-countryCode="BZ" value="501">Belize (+501)</option>
                                    <option data-countryCode="BJ" value="229">Benin (+229)</option>
                                    <option data-countryCode="BM" value="1441">Bermuda (+1441)</option>
                                    <option data-countryCode="BT" value="975">Bhutan (+975)</option>
                                    <option data-countryCode="BO" value="591">Bolivia (+591)</option>
                                    <option data-countryCode="BA" value="387">Bosnia Herzegovina (+387)</option>
                                    <option data-countryCode="BW" value="267">Botswana (+267)</option>
                                    <option data-countryCode="BR" value="55">Brazil (+55)</option>
                                    <option data-countryCode="BN" value="673">Brunei (+673)</option>
                                    <option data-countryCode="BG" value="359">Bulgaria (+359)</option>
                                    <option data-countryCode="BF" value="226">Burkina Faso (+226)</option>
                                    <option data-countryCode="BI" value="257">Burundi (+257)</option>
                                    <option data-countryCode="KH" value="855">Cambodia (+855)</option>
                                    <option data-countryCode="CM" value="237">Cameroon (+237)</option>
                                    <option data-countryCode="CA" value="1">Canada (+1)</option>
                                    <option data-countryCode="CV" value="238">Cape Verde Islands (+238)</option>
                                    <option data-countryCode="KY" value="1345">Cayman Islands (+1345)</option>
                                    <option data-countryCode="CF" value="236">Central African Republic (+236)</option>
                                    <option data-countryCode="CL" value="56">Chile (+56)</option>
                                    <option data-countryCode="CN" value="86">China (+86)</option>
                                    <option data-countryCode="CO" value="57">Colombia (+57)</option>
                                    <option data-countryCode="KM" value="269">Comoros (+269)</option>
                                    <option data-countryCode="CG" value="242">Congo (+242)</option>
                                    <option data-countryCode="CK" value="682">Cook Islands (+682)</option>
                                    <option data-countryCode="CR" value="506">Costa Rica (+506)</option>
                                    <option data-countryCode="HR" value="385">Croatia (+385)</option>
                                    <option data-countryCode="CU" value="53">Cuba (+53)</option>
                                    <option data-countryCode="CY" value="90392">Cyprus North (+90392)</option>
                                    <option data-countryCode="CY" value="357">Cyprus South (+357)</option>
                                    <option data-countryCode="CZ" value="42">Czech Republic (+42)</option>
                                    <option data-countryCode="DK" value="45">Denmark (+45)</option>
                                    <option data-countryCode="DJ" value="253">Djibouti (+253)</option>
                                    <option data-countryCode="DM" value="1809">Dominica (+1809)</option>
                                    <option data-countryCode="DO" value="1809">Dominican Republic (+1809)</option>
                                    <option data-countryCode="EC" value="593">Ecuador (+593)</option>
                                    <option data-countryCode="EG" value="20">Egypt (+20)</option>
                                    <option data-countryCode="SV" value="503">El Salvador (+503)</option>
                                    <option data-countryCode="GQ" value="240">Equatorial Guinea (+240)</option>
                                    <option data-countryCode="ER" value="291">Eritrea (+291)</option>
                                    <option data-countryCode="EE" value="372">Estonia (+372)</option>
                                    <option data-countryCode="ET" value="251">Ethiopia (+251)</option>
                                    <option data-countryCode="FK" value="500">Falkland Islands (+500)</option>
                                    <option data-countryCode="FO" value="298">Faroe Islands (+298)</option>
                                    <option data-countryCode="FJ" value="679">Fiji (+679)</option>
                                    <option data-countryCode="FI" value="358">Finland (+358)</option>
                                    <option data-countryCode="FR" value="33">France (+33)</option>
                                    <option data-countryCode="GF" value="594">French Guiana (+594)</option>
                                    <option data-countryCode="PF" value="689">French Polynesia (+689)</option>
                                    <option data-countryCode="GA" value="241">Gabon (+241)</option>
                                    <option data-countryCode="GM" value="220">Gambia (+220)</option>
                                    <option data-countryCode="GE" value="7880">Georgia (+7880)</option>
                                    <option data-countryCode="DE" value="49">Germany (+49)</option>
                                    <option data-countryCode="GH" value="233">Ghana (+233)</option>
                                    <option data-countryCode="GI" value="350">Gibraltar (+350)</option>
                                    <option data-countryCode="GR" value="30">Greece (+30)</option>
                                    <option data-countryCode="GL" value="299">Greenland (+299)</option>
                                    <option data-countryCode="GD" value="1473">Grenada (+1473)</option>
                                    <option data-countryCode="GP" value="590">Guadeloupe (+590)</option>
                                    <option data-countryCode="GU" value="671">Guam (+671)</option>
                                    <option data-countryCode="GT" value="502">Guatemala (+502)</option>
                                    <option data-countryCode="GN" value="224">Guinea (+224)</option>
                                    <option data-countryCode="GW" value="245">Guinea - Bissau (+245)</option>
                                    <option data-countryCode="GY" value="592">Guyana (+592)</option>
                                    <option data-countryCode="HT" value="509">Haiti (+509)</option>
                                    <option data-countryCode="HN" value="504">Honduras (+504)</option>
                                    <option data-countryCode="HK" value="852">Hong Kong (+852)</option>
                                    <option data-countryCode="HU" value="36">Hungary (+36)</option>
                                    <option data-countryCode="IS" value="354">Iceland (+354)</option>
                                    <!-- <option data-countryCode="IN" value="91">India (+91)</option> -->
                                    <option data-countryCode="ID" value="62">Indonesia (+62)</option>
                                    <option data-countryCode="IR" value="98">Iran (+98)</option>
                                    <option data-countryCode="IQ" value="964">Iraq (+964)</option>
                                    <option data-countryCode="IE" value="353">Ireland (+353)</option>
                                    <option data-countryCode="IL" value="972">Israel (+972)</option>
                                    <option data-countryCode="IT" value="39">Italy (+39)</option>
                                    <option data-countryCode="JM" value="1876">Jamaica (+1876)</option>
                                    <option data-countryCode="JP" value="81">Japan (+81)</option>
                                    <option data-countryCode="JO" value="962">Jordan (+962)</option>
                                    <option data-countryCode="KZ" value="7">Kazakhstan (+7)</option>
                                    <option data-countryCode="KE" value="254">Kenya (+254)</option>
                                    <option data-countryCode="KI" value="686">Kiribati (+686)</option>
                                    <option data-countryCode="KP" value="850">Korea North (+850)</option>
                                    <option data-countryCode="KR" value="82">Korea South (+82)</option>
                                    <option data-countryCode="KW" value="965">Kuwait (+965)</option>
                                    <option data-countryCode="KG" value="996">Kyrgyzstan (+996)</option>
                                    <option data-countryCode="LA" value="856">Laos (+856)</option>
                                    <option data-countryCode="LV" value="371">Latvia (+371)</option>
                                    <option data-countryCode="LB" value="961">Lebanon (+961)</option>
                                    <option data-countryCode="LS" value="266">Lesotho (+266)</option>
                                    <option data-countryCode="LR" value="231">Liberia (+231)</option>
                                    <option data-countryCode="LY" value="218">Libya (+218)</option>
                                    <option data-countryCode="LI" value="417">Liechtenstein (+417)</option>
                                    <option data-countryCode="LT" value="370">Lithuania (+370)</option>
                                    <option data-countryCode="LU" value="352">Luxembourg (+352)</option>
                                    <option data-countryCode="MO" value="853">Macao (+853)</option>
                                    <option data-countryCode="MK" value="389">Macedonia (+389)</option>
                                    <option data-countryCode="MG" value="261">Madagascar (+261)</option>
                                    <option data-countryCode="MW" value="265">Malawi (+265)</option>
                                    <option data-countryCode="MY" value="60">Malaysia (+60)</option>
                                    <option data-countryCode="MV" value="960">Maldives (+960)</option>
                                    <option data-countryCode="ML" value="223">Mali (+223)</option>
                                    <option data-countryCode="MT" value="356">Malta (+356)</option>
                                    <option data-countryCode="MH" value="692">Marshall Islands (+692)</option>
                                    <option data-countryCode="MQ" value="596">Martinique (+596)</option>
                                    <option data-countryCode="MR" value="222">Mauritania (+222)</option>
                                    <option data-countryCode="YT" value="269">Mayotte (+269)</option>
                                    <option data-countryCode="MX" value="52">Mexico (+52)</option>
                                    <option data-countryCode="FM" value="691">Micronesia (+691)</option>
                                    <option data-countryCode="MD" value="373">Moldova (+373)</option>
                                    <option data-countryCode="MC" value="377">Monaco (+377)</option>
                                    <option data-countryCode="MN" value="976">Mongolia (+976)</option>
                                    <option data-countryCode="MS" value="1664">Montserrat (+1664)</option>
                                    <option data-countryCode="MA" value="212">Morocco (+212)</option>
                                    <option data-countryCode="MZ" value="258">Mozambique (+258)</option>
                                    <option data-countryCode="MN" value="95">Myanmar (+95)</option>
                                    <option data-countryCode="NA" value="264">Namibia (+264)</option>
                                    <option data-countryCode="NR" value="674">Nauru (+674)</option>
                                    <option data-countryCode="NP" value="977">Nepal (+977)</option>
                                    <option data-countryCode="NL" value="31">Netherlands (+31)</option>
                                    <option data-countryCode="NC" value="687">New Caledonia (+687)</option>
                                    <option data-countryCode="NZ" value="64">New Zealand (+64)</option>
                                    <option data-countryCode="NI" value="505">Nicaragua (+505)</option>
                                    <option data-countryCode="NE" value="227">Niger (+227)</option>
                                    <option data-countryCode="NG" value="234">Nigeria (+234)</option>
                                    <option data-countryCode="NU" value="683">Niue (+683)</option>
                                    <option data-countryCode="NF" value="672">Norfolk Islands (+672)</option>
                                    <option data-countryCode="NP" value="670">Northern Marianas (+670)</option>
                                    <option data-countryCode="NO" value="47">Norway (+47)</option>
                                    <option data-countryCode="OM" value="968">Oman (+968)</option>
                                    <option data-countryCode="PW" value="680">Palau (+680)</option>
                                    <option data-countryCode="PA" value="507">Panama (+507)</option>
                                    <option data-countryCode="PG" value="675">Papua New Guinea (+675)</option>
                                    <option data-countryCode="PY" value="595">Paraguay (+595)</option>
                                    <option data-countryCode="PE" value="51">Peru (+51)</option>
                                    <option data-countryCode="PH" value="63">Philippines (+63)</option>
                                    <option data-countryCode="PL" value="48">Poland (+48)</option>
                                    <option data-countryCode="PT" value="351">Portugal (+351)</option>
                                    <option data-countryCode="PR" value="1787">Puerto Rico (+1787)</option>
                                    <option data-countryCode="QA" value="974">Qatar (+974)</option>
                                    <option data-countryCode="RE" value="262">Reunion (+262)</option>
                                    <option data-countryCode="RO" value="40">Romania (+40)</option>
                                    <option data-countryCode="RU" value="7">Russia (+7)</option>
                                    <option data-countryCode="RW" value="250">Rwanda (+250)</option>
                                    <option data-countryCode="SM" value="378">San Marino (+378)</option>
                                    <option data-countryCode="ST" value="239">Sao Tome &amp; Principe (+239)</option>
                                    <option data-countryCode="SA" value="966">Saudi Arabia (+966)</option>
                                    <option data-countryCode="SN" value="221">Senegal (+221)</option>
                                    <option data-countryCode="CS" value="381">Serbia (+381)</option>
                                    <option data-countryCode="SC" value="248">Seychelles (+248)</option>
                                    <option data-countryCode="SL" value="232">Sierra Leone (+232)</option>
                                    <option data-countryCode="SG" value="65">Singapore (+65)</option>
                                    <option data-countryCode="SK" value="421">Slovak Republic (+421)</option>
                                    <option data-countryCode="SI" value="386">Slovenia (+386)</option>
                                    <option data-countryCode="SB" value="677">Solomon Islands (+677)</option>
                                    <option data-countryCode="SO" value="252">Somalia (+252)</option>
                                    <option data-countryCode="ZA" value="27">South Africa (+27)</option>
                                    <option data-countryCode="ES" value="34">Spain (+34)</option>
                                    <option data-countryCode="LK" value="94">Sri Lanka (+94)</option>
                                    <option data-countryCode="SH" value="290">St. Helena (+290)</option>
                                    <option data-countryCode="KN" value="1869">St. Kitts (+1869)</option>
                                    <option data-countryCode="SC" value="1758">St. Lucia (+1758)</option>
                                    <option data-countryCode="SD" value="249">Sudan (+249)</option>
                                    <option data-countryCode="SR" value="597">Suriname (+597)</option>
                                    <option data-countryCode="SZ" value="268">Swaziland (+268)</option>
                                    <option data-countryCode="SE" value="46">Sweden (+46)</option>
                                    <option data-countryCode="CH" value="41">Switzerland (+41)</option>
                                    <option data-countryCode="SI" value="963">Syria (+963)</option>
                                    <option data-countryCode="TW" value="886">Taiwan (+886)</option>
                                    <option data-countryCode="TJ" value="7">Tajikstan (+7)</option>
                                    <option data-countryCode="TH" value="66">Thailand (+66)</option>
                                    <option data-countryCode="TG" value="228">Togo (+228)</option>
                                    <option data-countryCode="TO" value="676">Tonga (+676)</option>
                                    <option data-countryCode="TT" value="1868">Trinidad &amp; Tobago (+1868)</option>
                                    <option data-countryCode="TN" value="216">Tunisia (+216)</option>
                                    <option data-countryCode="TR" value="90">Turkey (+90)</option>
                                    <option data-countryCode="TM" value="7">Turkmenistan (+7)</option>
                                    <option data-countryCode="TM" value="993">Turkmenistan (+993)</option>
                                    <option data-countryCode="TC" value="1649">Turks &amp; Caicos Islands (+1649)</option>
                                    <option data-countryCode="TV" value="688">Tuvalu (+688)</option>
                                    <option data-countryCode="UG" value="256">Uganda (+256)</option>
                                    <option data-countryCode="GB" value="44">UK (+44)</option>
                                    <option data-countryCode="UA" value="380">Ukraine (+380)</option>
                                    <option data-countryCode="AE" value="971">United Arab Emirates (+971)</option>
                                    <option data-countryCode="UY" value="598">Uruguay (+598)</option>
                                    <option data-countryCode="US" value="1">USA (+1)</option>
                                    <option data-countryCode="UZ" value="7">Uzbekistan (+7)</option>
                                    <option data-countryCode="VU" value="678">Vanuatu (+678)</option>
                                    <option data-countryCode="VA" value="379">Vatican City (+379)</option>
                                    <option data-countryCode="VE" value="58">Venezuela (+58)</option>
                                    <option data-countryCode="VN" value="84">Vietnam (+84)</option>
                                    <option data-countryCode="VG" value="84">Virgin Islands - British (+1284)</option>
                                    <option data-countryCode="VI" value="84">Virgin Islands - US (+1340)</option>
                                    <option data-countryCode="WF" value="681">Wallis &amp; Futuna (+681)</option>
                                    <option data-countryCode="YE" value="969">Yemen (North)(+969)</option>
                                    <option data-countryCode="YE" value="967">Yemen (South)(+967)</option>
                                    <option data-countryCode="ZM" value="260">Zambia (+260)</option>
                                    <option data-countryCode="ZW" value="263">Zimbabwe (+263)</option>
                                </select>
                            </div>
                            <div class="col-3 ci">
                                Mobile No
                                <input type="text" name="mobile" class="form-control" placeholder="Mobile No" required>
                            </div>
                            <div class="col-6 ci">
                                Email
                                <input type="email" name="email" class="form-control" placeholder="Email" required>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="send-email">
                        &nbsp;
                    </div>
                </div>
                <div class="traveller-details individual-traveller-div">
                    <div class="traveller-head">
                        <h5>Passenger Details</h5>
                        <h6><span>0</span> Passengers</h6>
                    </div>
                    <hr>
                    <input type="hidden" id="p-count" name="passengersCount" value="0">
                    <div class="each-traveller-div">
                    </div>
                    <div class="row each-traveller no-traveller">
                        <div>
                            <span class="traveller-name"></span>
                            You have not added any adults to the list
                        </div>
                    </div>
                    <div class="row add-traveller-div collapse" id="collapseExample">
                        <div class="note-name"><span>IMPORTANT :</span> Enter your name as it is mentioned on your passport or any government approved ID.</div>
                        <div class="row form-group add-traveller-div-name">
                            <div class="col">
                                <input type="text" class="form-control" id="fname" placeholder="First name">
                            </div>
                            <div class="col">
                                <input type="text" class="form-control" id="lname" placeholder="Last name">
                            </div>
                        </div>
                        
                        <div class="row form-group radio-div">
                            <div class="form-check-inline cd">
                                Gender: 
                            </div>
                            <div class="form-check-inline">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input gender" value="male">Male
                                </label>
                            </div>
                            <div class="form-check-inline">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input gender" value="female">Female
                                </label>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary btn-light" style="margin-right: auto;" onclick="add_traveller()">Add</button>
                    </div>
                    <hr>
                    <div class="add-traveller">
                        <button class="add-traveller-btn text-uppercase btn"  type="button" data-toggle="collapse" data-target="#collapseExample">+ ADD ADULT</button>
                    </div>
                </div>
                <div class="payment-btn" style="background-color: transparent;">
                    <button type="submit" class="btn btn-primary btn-danger">Proceed to payment</button>
                </div>
                </div>
                <div class="col-4">
                    <div class="price-details">
                        <h5>Fare Summary</h5>
                        <hr>
                        <div class="row base-fare">
                            <div class="base-fae-label">Base Fare: </div>
                            <div class="base-fare-value">
                                {% if seat == 'First' %}
                                    ₹ <span>
                                        {% if flight2 %}
                                            {{flight1.first_fare | add:flight2.first_fare}}
                                        {% else %}
                                            {{flight1.first_fare}}
                                        {% endif %}
                                        </span>
                                    <input type="hidden" id="basefare" value="{% if flight2 %}{{flight1.first_fare | add:flight2.first_fare}}{% else %}{{flight1.first_fare}}{% endif %}">
                                {% elif seat == 'Business' %}
                                    ₹ <span>
                                        {% if flight2 %}
                                            {{flight1.business_fare | add:flight2.business_fare}}
                                        {% else %}
                                            {{flight1.business_fare}}
                                        {% endif %}
                                        </span>
                                    <input type="hidden" id="basefare" value="{% if flight2 %}{{flight1.business_fare | add:flight2.business_fare}}{% else %}{{flight1.business_fare}}{% endif %}">
                                {% elif seat == 'Economy' %}
                                    ₹ <span>
                                        {% if flight2 %}
                                            {{flight1.economy_fare | add:flight2.economy_fare}}
                                        {% else %}
                                            {{flight1.economy_fare}}
                                        {% endif %}
                                    </span>
                                    <input type="hidden" id="basefare" value="{% if flight2 %}{{flight1.economy_fare | add:flight2.economy_fare}}{% else %}{{flight1.economy_fare}}{% endif %}">
                                {% endif %}
                            </div>
                        </div>
                        <div class="row surcharges">
                            <div class="surcharges-label">Fee & Surcharges: </div>
                            <div class="surcharges-value">₹ <span>{{fee}}</span></div>
                            <input type="hidden" id="fee" value="{{fee}}">
                        </div>
                        <hr>
                        <div class="total-fare">
                            <div class="total-fare-label">Total Fare: </div>
                            <div class="total-fare-value">
                                {% if seat == 'First' %}
                                    ₹ <span>
                                        {% if flight2 %}
                                            {{flight1.first_fare | add:flight2.first_fare | add:fee}}
                                        {% else %}
                                            {{flight1.first_fare | add:fee}}
                                        {% endif %}
                                    </span>
                                {% elif seat == 'Business' %}
                                    ₹ <span>
                                        {% if flight2 %}
                                            {{flight1.business_fare | add:flight2.business_fare | add:fee}}
                                        {% else %}
                                            {{flight1.business_fare | add:fee}}
                                        {% endif %}
                                    </span>
                                {% elif seat == 'Economy' %}
                                    ₹ <span>
                                        {% if flight2 %}
                                            {{flight1.economy_fare | add:flight2.economy_fare | add:fee}}
                                        {% else %}
                                            {{flight1.economy_fare | add:fee}}
                                        {% endif %}
                                        </span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="coupon-code">
                        <h5>Have a coupon code?</h5>
                        <hr>
                        <div class="row base-fare">
                            <div class="col-9" style="padding: 10px 10px 10px 0px">
                                <input type="text" name="coupon" class="form-control" placeholder="Coupon Code" style="text-transform: uppercase;">
                            </div>
                            <div class="col coupon-apply" style="padding: 10px 10px 10px 0px">
                                <center>
                                    <button type="button" class="btn btn-primary btn-danger">Apply</button>
                                </center>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col media-payment-btn">
                    <div>
                        <button type="submit" class="btn btn-primary btn-danger">Proceed to payment</button>
                    </div>
                </div>
            </div>
        </form>
    </section>
{% endblock %}

bookings.html:
{% extends 'flight/layout.html' %}

{% load static %}

{% block head %}
    <title>Bookings | Flight</title>
    <script type="text/javascript" src="{% static 'js/bookings.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/bookings_style.css' %}">
{% endblock head %}

{% block body %}
    <section class="section section1">
        <div class="container">
            {% if tickets %}
                {% for ticket in tickets %}
                    <div class="row each-booking-div" id="{{ticket.ref_no}}">
                        <div class="col-2" style="display: flex;">
                            <div style="display: flex; color: #666666; margin-top: auto;">
                                <div>
                                    <span style="font-size: 2.1em;">{{ticket.flight_ddate | date:"d"}}</span>
                                </div>
                                <div style="font-size: smaller; display: flex; margin: auto 0; padding-left: 5px; line-height: 1em;">
                                    <div style="margin: auto;">
                                        <div style="margin-bottom: 1px;">{{ticket.flight_ddate | date:"D"}}</div>
                                        <div style="margin-top: 1px;">{{ticket.flight_ddate | date:"M'y"}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-4 middle-div">
                            <div style="width:100%">
                                <div class="row places-div" style=" display: flex;">
                                    <div style="max-width: 45%;">{{ticket.flight.origin.city}}</div>
                                    <div>&nbsp;-&nbsp;</div>
                                    <div style="max-width: 45%;">{{ticket.flight.destination.city}}</div>
                                </div>
                                <div class="row places-div" style="font-size: .8em; color: #999999; ">
                                    <div style="max-width: 100%;">{{ticket.flight.airline}} &middot; {{ticket.flight.plane}} &middot; {{ticket.passengers.count}} Passengers</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-2 middle-div">
                            <div style="font-size: 1.2em; color: #945937;">{{ticket.ref_no}}</div>
                        </div>
                        <div class="col-2 middle-div">
                            <div>
                                <div class="row status-div">
                                    {% if ticket.status == 'CONFIRMED' %}
                                        <div class="green">{{ticket.status}}</div>
                                    {% endif %}
                                    {% if ticket.status == 'PENDING' %}
                                        <div class="orange">{{ticket.status}}</div>
                                    {% endif %}
                                    {% if ticket.status == 'CANCELLED' %}
                                        <div class="red">{{ticket.status}}</div>
                                    {% endif %}
                                </div>
                                <div class="row booking-date-div" style="font-size: .7em; color: #666;">
                                    {% if ticket.status == 'CONFIRMED' %}
                                        Booked on: {{ticket.booking_date | date:"D, M d Y"}}
                                    {% endif %}
                                    {% if ticket.status == 'PENDING' %}
                                        Reviewed on: {{ticket.booking_date | date:"D, M d Y"}}
                                    {% endif %}
                                    {% if ticket.status == 'CANCELLED' %}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="col-2 last-div">
                            <div>
                                <div class="ticket-action-div">
                                    {% if ticket.status == 'CONFIRMED' %}
                                        <!--<button class="btn btn-outline-primary btnp">Print Ticket</button>-->
                                        <form action="{% url 'getticket' %}" method="get" target="_blank">
                                            <input type="hidden" name="ref" value="{{ticket.ref_no}}">
                                            <button type="submit" class="btn btn-outline-info btnp pbtn">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-printer" viewBox="0 0 16 16">
                                                    <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
                                                    <path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/>
                                                </svg>
                                            </button>
                                        </form>
                                        <button class="btn btn-outline-danger btnp cbtn"  data-ref="{{ticket.ref_no}}" onclick="popup(this)">Cancel</button>
                                    {% endif %}
                                    {% if ticket.status == 'PENDING' %}
                                        <form action="{% url 'resumebooking' %}" method="POST">
                                            {% csrf_token %}
                                            <input type="hidden" name="ref" value="{{ticket.ref_no}}">
                                            <button type="submit" class="btn btn-outline-primary btnp rbtn">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-circle" viewBox="0 0 16 16">
                                                    <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>
                                                  </svg>
                                            </button>
                                        </form>

                                        <button type="button" class="btn btn-outline-danger btnp cbtn" data-ref="{{ticket.ref_no}}" onclick="popup(this)">Cancel</button>
                                    {% endif %}
                                    {% if ticket.status == 'CANCELLED' %}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                    </div>
                {% endfor %}
            {% else %}
                <div style="height: 100%; width:100%; padding: 10%;">
                    <div style="text-align: center; margin: auto;">
                        <svg width="4em" height="4em" viewBox="0 0 16 16" class="bi bi-exclamation-circle" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                            <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                        </svg>
                        <br><br>
                        <h3>Oops! Looks empty</h3>
                        <p>
                            Looks like You don't have any bookings yet.
                        </p>
                    </div>
                </div>
            {% endif %}
        </div>
    </section>
    
{% endblock %}

{% block parentBody %}
    <div class="popup">
        <div class="small-popup">
            <div style="margin-bottom: 10px; font-size: 1.1em;"><strong>Do you really want to cancel this ticket?</strong></div>
            <div class="popup-actions">
                <button class="btn btn-light" onclick="remove_popup()">Go Back</button>
                <button class="btn btn-danger" id="cancel_ticket_btn" data-ref="" onclick="cancel_tkt()">Cancel</button>
            </div>
        </div>
    </div>
{% endblock %}

contact.html:
{% extends 'flight/layout.html' %}

{% load static %}

{% block head %}
    <title>Contact | Flight</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/contact.css' %}">
{% endblock head %}

{% block body %}
    <section class="section section1" style="background: url({% static 'img/contactbg.svg' %}) no-repeat top center;background-size: cover;">
      <div class="container">
          <div class="row">
              <div class="col-md-6 top-left-section">
                <div class="section-heading">
                    <h1>Get in touch with us</h1>
                    <div class="line-dec"></div>
                </div>
                <div class="row-fluid-wrapper row-depth-1 row-number-3 section-1-column-1-row-1-margin dnd-row">
                    <div class="row-fluid ">
                    <div class="span12 widget-span widget-type-custom_widget dnd-module" style="" data-widget-type="custom_widget" data-x="0" data-w="12">
                    <div id="hs_cos_wrapper_section-1-module-3" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module" style="" data-hs-cos-general-type="widget" data-hs-cos-type="module">
                    <div class="container-fluid ">
                        <div class="row-fluid-wrapper bb">
                            <div class="row-fluid">
                                <div class="span12 widget-span widget-type-cell elements-module-button_section-1-module-3" style="text-align: left;width: 100%;" data-widget-type="cell" data-x="0" data-w="12">
                                    <span class="elements-btns-styles_section-1-module-3" target="_blank" rel="noopener">
                                      <a href="mailto:shop.ayush930@gmail.com" target="_blank" rel="noopener">
                                        <img class="elements-ci__image_section-1-module-3" src="https://www.peoplemetrics.com/hubfs/Website/email_1-blue-bottom.svg" alt="email" loading="" width="52" height="40">
                                      </a>
                                    <a href="mailto:shop.ayush930@gmail.com" class="elements-btns-text--styles_section-1-module-3" style="color: #74828c; letter-spacing:.5px;">
                                      shop.ayush930@gmail.com
                                    </a>
                                  </span>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span12 widget-span widget-type-cell elements-module-button_section-1-module-3" style="text-align: left;width: 100%;" data-widget-type="cell" data-x="0" data-w="12">
                                    <span href="tel:(215)%20979-8030" class="elements-btns-styles_section-1-module-3" target="_blank" rel="noopener">
                                          <a href="tel:#" target="_blank" rel="noopener">
                                            <img class="elements-ci__image_section-1-module-3" src="https://www.peoplemetrics.com/hubfs/Website/phone_1-blue-bottom.svg" alt="phone" loading="" width="52" height="40">
                                          </a>
                                    <a href="tel:#" class="elements-btns-text--styles_section-1-module-3" style="color: #74828c;">
                                      (215) 979-XXXX
                                    </a>
                                  </span>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span12 widget-span widget-type-cell elements-module-button_section-1-module-3" style="text-align: left;width: 100%;" data-widget-type="cell" data-x="0" data-w="12">
                                    <span href="https://g.page/DSCENGG?share" class="elements-btns-styles_section-1-module-3" target="_blank" rel="noopener"> 
                                          <a href="https://g.page/DSCENGG?share" target="_blank" rel="noopener">
                                            <img class="elements-ci__image_section-1-module-3" src="https://www.peoplemetrics.com/hubfs/Website/pin-blue-bottom.svg" alt="address" loading="" width="50" height="50">
                                          </a>
                                    <a href="https://g.page/DSCENGG?share" class="elements-btns-text--styles_section-1-module-3" style="color: #74828c;">
                                      DSCE, Bangalore, India - 560078
                                    </a>
                                  </span>
                                </div>
                            </div>
                        </div>
                    </div>
                  </div>
              </div><!--end widget-span -->
          </div><!--end row-->
        </div>
      </div>
        <div class="col-md-6 contact-form-box">
            <div class="section-heading">
                <form id="ContactUs100" method="post" onsubmit="return ValidateForm(this);">
                  {% csrf_token %}
                    <script type="text/javascript">
                    function ValidateForm(frm) {
                    if (frm.Name.value == "") { alert('Name is required.'); frm.Name.focus(); return false; }
                    if (frm.FromEmailAddress.value == "") { alert('Email address is required.'); frm.FromEmailAddress.focus(); return false; }
                    if (frm.FromEmailAddress.value.indexOf("@") < 1 || frm.FromEmailAddress.value.indexOf(".") < 1) { alert('Please enter a valid email address.'); frm.FromEmailAddress.focus(); return false; }
                    if (frm.Comments.value == "") { alert('Please enter comments or questions.'); frm.Comments.focus(); return false; }
                    alert('Thank you for contacting us. We will get back to you as soon as possible.');
                    return true; }
                    </script>
                    <table style="width:100%;max-width:550px;border:0;" cellpadding="8" cellspacing="0">
                    <tr> <td>
                    <label for="Name">Name:</label>
                    </td> <td>
                    <input name="Name" type="text" maxlength="60"  autocomplete="off" placeholder="John Doe" required>
                    </td> </tr> <tr> <td>
                    <label for="PhoneNumber">Phone:</label>
                    </td> <td>
                    <input name="PhoneNumber" type="tel" maxlength="15"  autocomplete="off" placeholder="+91 9999988888" required>
                    </td> </tr> <tr> <td>
                    <label for="FromEmailAddress">Email:</label>
                    </td> <td>
                    <input name="FromEmailAddress" type="email" maxlength="90"  autocomplete="off" placeholder="john@gmail.com" required>
                    </td> </tr> <tr> <td>
                    <label for="Comments">Message:</label>
                    </td> <td>
                    <textarea name="Comments" rows="7" cols="40" autocomplete="off" placeholder="Enter your message here..." required></textarea>
                    </td> </tr> <tr> <td>
                    </td> <td>
                    <button class="btn btn-danger">Send Message</button>
                    <button type='submit' class="btn btn-danger" hidden>Send Message</button>
                    {% comment %} <input name="skip_Submit" type="submit" value="Send Message" /> {% endcomment %}
                    </td> </tr>
                    </table>
                </form>
            </div>
        </div>
      </div>
    </div>
  </section>
{% endblock%}

index.html:
{% extends 'flight/layout.html' %}

{% load static %}

{% block head %}
    <title>Home | Flight</title>
    <script type="text/javascript" src="{% static 'js/index.js' %}"></script>
{% endblock head %}

{% block body %}
    <section class="section first-section" style="background-image: linear-gradient(rgba(0,0,0,0.2),rgba(0,0,0,0.2)), url('{% static 'img/plane3.12.jpg'%}');">
        <div class="banner-div">
            <div class="banner">
            <h1 class="banner-text">Book Domestic and International Flight Tickets</h1>
            </div>
        </div>
        <div class="search-flight">
            <div class="container">
            <form class="search-flight-form" action="{% url 'flight' %}" onsubmit="return flight_search()">
                <div class="align-items-center">
                    <div class="search-flight-form-data">
                        <div class="input-row" style="display: flex;">
                        <div class="form-check-inline">
                            <label class="form-check-label">
                            <input type="radio" class="form-check-input trip-type" id="one-way" name="TripType" value="1" checked>One-way
                            </label>
                        </div>
                        <div class="form-check-inline">
                            <label class="form-check-label">
                            <input type="radio" class="form-check-input trip-type" id="round-trip" name="TripType" value="2" {% if trip_type == '2' %}checked{% endif %}>Round Trip
                            </label>
                        </div>
                        </div>
                        <div class="input-row">
                            <label for="flight-from">From: </label>
                            <input type="text" name="Origin" placeholder="From" id="flight-from" class="form-control mr-sm-3" onblur="hideplaces(this)" data-value="{{origin | lower}}" data-list="places_from" autocomplete="off" value="{{origin | upper}}">  <!--list="places_from"-->
                            <div id="places_from" class="places_box">
                                <div class="each_places_from_list places__list" data-value="del" onclick="selectplace(this)">Delhi (India)</div>
                                <div class="each_places_from_list places__list" data-value="bom" onclick="selectplace(this)">Mumbai (India)</div>
                                <div class="each_places_from_list places__list" data-value="bkk" onclick="selectplace(this)">Bangkok (Thailand)</div>
                                <div class="each_places_from_list places__list" data-value="nrt" onclick="selectplace(this)">Tokyo (Japan)</div>
                                <div class="each_places_from_list places__list" data-value="sin" onclick="selectplace(this)">Singapore (Singapore)</div>
                                <div class="each_places_from_list places__list" data-value="tpe" onclick="selectplace(this)">Taipei (Taiwan)</div>
                                <div class="each_places_from_list places__list" data-value="nyc" onclick="selectplace(this)">New York (USA)</div>
                            </div>
                        </div>
                        <div class="input-row">
                            <label for="flight_to">To: </label>
                            <input type="text" name="Destination" placeholder="To" id="flight-to" class="form-control mr-sm-3" onblur="hideplaces(this)" data-value="{{destination | lower}}" data-list="places_to" autocomplete="off" value="{{destination | upper}}">
                            <div id="places_to" class="places_box">
                                <div class="each_places_to_list places__list" data-value="del" onclick="selectplace(this)">Delhi (India)</div>
                                <div class="each_places_to_list places__list" data-value="bom" onclick="selectplace(this)">Mumbai (India)</div>
                                <div class="each_places_to_list places__list" data-value="bkk" onclick="selectplace(this)">Bangkok (Thailand)</div>
                                <div class="each_places_to_list places__list" data-value="nrt" onclick="selectplace(this)">Tokyo (Japan)</div>
                                <div class="each_places_to_list places__list" data-value="sin" onclick="selectplace(this)">Singapore (Singapore)</div>
                                <div class="each_places_to_list places__list" data-value="tpe" onclick="selectplace(this)">Taipei (Taiwan)</div>
                                <div class="each_places_to_list places__list" data-value="nyc" onclick="selectplace(this)">New York (USA)</div>
                            </div>
                        </div>
                        <div class="input-row">
                            <label for="depart_date">Departure Date: </label>
                            <input type="date" name="DepartDate" min="{{min_date}}" max="{{max_date}}" id="depart_date" placeholder="Date" class="form-control mr-sm-2" value="{{depart_date}}">
                        </div>
                        <div class="input-row">
                            <label for="return_date">Return Date: </label>
                            <input type="date" name="ReturnDate" min="{{min_date}}" max="{{max_date}}" id="return_date" placeholder="Date" class="form-control mr-sm-2" value="{{return_date}}" {% if trip_type != '2' %} disabled {% endif %}>
                        </div>
                        <div class="input-row">
                            <label for="seat_class">Class: </label>
                            <select name="SeatClass" id="SeatType" class="form-control mr-sm-2 selectpicker">
                                <option value="economy" {% if seat == 'economy' %}selected{% endif %}>Economy</option>
                                <option value="business" {% if seat == 'business' %}selected{% endif %}>Business</option>
                                <option value="first" {% if seat == 'first' %}selected{% endif %}>First</option>
                            </select>
                        </div>
                        <div class="input-row">
                            <button type="submit" class="btn btn-danger">Search Flight</button>
                        </div>
                    </div>
                </div>
            </form>
            </div>
        </div>
    </section>
    <section class="section second-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-6">
                    <div class="section_title text-center mb_70">
                        <h2>Popular Destination</h2>
                    </div>
                </div>
            </div>
            <div class="row popular_destinations">
                <div class="col-lg-4 col-md-6">
                    <div class="single_destination" onclick="window.location.href = 'https://en.wikipedia.org/wiki/Tourism_in_Italy'">
                        <div class="thumb">
                            <img src="{% static 'img/destination/1.png' %}" alt="">
                        </div>
                        <div class="content">
                            <a href="#">Italy</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="single_destination" onclick="window.location.href = 'https://en.wikipedia.org/wiki/Tourism_in_Brazil'">
                        <div class="thumb">
                            <img src="{% static 'img/destination/2.png' %}" alt="">
                        </div>
                        <div class="content">
                            <a href="#">Brazil</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="single_destination" onclick="window.location.href = 'https://en.wikipedia.org/wiki/Tourism_in_the_United_States'">
                        <div class="thumb">
                            <img src="{% static 'img/destination/3.png' %}" alt="">
                        </div>
                        <div class="content">
                            <a href="#">America</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="single_destination" onclick="window.location.href = 'https://en.wikipedia.org/wiki/Tourism_in_Nepal'">
                        <div class="thumb">
                            <img src="{% static 'img/destination/4.png' %}" alt="">
                        </div>
                        <div class="content">
                            <a href="#">Nepal</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="single_destination" onclick="window.location.href = 'https://en.wikipedia.org/wiki/Tourism_in_the_Maldives'">
                        <div class="thumb">
                            <img src="{% static 'img/destination/5.png' %}" alt="">
                        </div>
                        <div class="content">
                            <a href="#">Maldives</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="single_destination" onclick="window.location.href = 'https://en.wikipedia.org/wiki/Tourism_in_Indonesia'">
                        <div class="thumb">
                            <img src="{% static 'img/destination/6.png' %}" alt="">
                        </div>
                        <div class="content">
                            <a href="#">Indonesia</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock%}

layout.html{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.typekit.net/cav5lva.css">
  <link rel="stylesheet" href="{% static 'css/layout_style.css' %}">
  <link rel="icon" type="image/ico" href="/static/img/favicon.ico">
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  <script type="text/javascript" src="{% static 'js/layout.js' %}"></script>
  {% block head %}
  {% endblock %}
</head>
<body>
  {% block parentBody %}
  {% endblock %}
  <div class="container-fluid">
    <nav class="navbar navbar-expand-lg navbar-light">
      <a class="navbar-brand" href="{% url 'index' %}">
          <img src="{% static 'img/icon_logo.png' %}" height="34" alt="">
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item {% if not page %}active{% endif %}">
            <a class="nav-link" href="{% url 'index' %}">Home</a>
          </li>
          <li class="nav-item {% if page == 'bookings' %}active{% endif %}">
            <a class="nav-link" href="{% url 'bookings' %}">My Bookings</a>
          </li>
        </ul>
        <ul class="navbar-nav">
          {% if not user.is_authenticated %}
            <li class="nav-item">
              <button class="btn btn-outline-danger" style="border-radius: 25rem;" onclick="window.location.href = '/login';">
                <svg width="1.1em" height="1.1em" viewBox="0 1.5 16 16" class="bi bi-person-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                </svg>
                Login
              </button>
            </li>
          {% else %}
            <li class="nav-item dropdown my-account">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                My Account
              </a>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                <div class="dropdown-header" style="display: flex; padding: .5rem 1.2rem">
                  <div>
                      <svg width="1.5em" height="1.7em" viewBox="0 1 16 16" class="bi bi-person-circle" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13.468 12.37C12.758 11.226 11.195 10 8 10s-4.757 1.225-5.468 2.37A6.987 6.987 0 0 0 8 15a6.987 6.987 0 0 0 5.468-2.63z"/>
                        <path fill-rule="evenodd" d="M8 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                        <path fill-rule="evenodd" d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"/>
                      </svg>
                  </div>
                  <div style="margin-left: 7%;">
                      {{user.first_name}} {{user.last_name}}
                  </div>
                </div>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="{% url 'logout' %}">
                  <svg width="1.1em" height="1.1em" viewBox="0 1.5 16 16" class="bi bi-power" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M5.578 4.437a5 5 0 1 0 4.922.044l.5-.866a6 6 0 1 1-5.908-.053l.486.875z"/>
                    <path fill-rule="evenodd" d="M7.5 8V1h1v7h-1z"/>
                  </svg>
                  Logout
                </a>
              </div>
            </li>
          {% endif %}
        </ul>
      </div>
    </nav>

    <main>
      {% block body %}{% endblock %}
    </main>

    <footer>
      <div class="container">
        <div>
          <div class="logo-container">
            <img src="{% static 'img/icon_logo.png' %}">
          </div>
          <div class="footer-content">
            <div class="links-container">
              <div>
                <ul class="link-list">
                  <li class="list-item"><a class="footer-links" href="{% url 'contact' %}">Contact Us</a></li>
                  <li class="list-item"><a class="footer-links" href="{% url 'aboutus' %}">About Us</a></li>
                  <li class="list-item"><a class="footer-links" href="{% url 'privacypolicy' %}">Privacy Policy</a></li>
                  <li class="list-item"><a class="footer-links" href="{% url 'termsandconditions' %}">Terms &amp; Conditions</a></li>
                </ul>
              </div>
            </div>
            <div class="quote-container">
              <div class="quote">“Surround yourself with people that are smarter than you, give them everything they need to grow, and your business will thrive.”</div>
              <div class="quote-by">- Richard Branson</div>
            </div>
          </div>
          <div class="social-links">
            <div class="social-icons">
              <a href="#" class="social-icon">
                <svg width="20" height="20" viewBox="0 0 8 16" xmlns="http://www.w3.org/2000/svg">
                  <path fill="#1A1A1A" d="m2 5.33333333h-2v2.66666667h2v8h3.33333333v-8h2.428l.23866667-2.66666667h-2.66666667v-1.11133333c0-.63666667.128-.88866667.74333334-.88866667h1.92333333v-3.33333333h-2.53866667c-2.39733333 0-3.46133333 1.05533333-3.46133333 3.07666667z"></path>
                </svg>
              </a>
              <a href="#" class="social-icon">
                <svg width="20" height="20" viewBox="0 -1 16 14" xmlns="http://www.w3.org/2000/svg">
                  <path fill="#1A1A1A" d="m16 1.70466667c-.5886667.26133333-1.2213333.43733333-1.8853333.51666666.678-.406 1.1986666-1.04933333 1.4433333-1.816-.634.376-1.3366667.64933334-2.0846667.79666667-.598-.638-1.452-1.03666667-2.396-1.03666667-2.1193333 0-3.67666663 1.97733334-3.19799997 4.03-2.72733333-.13666666-5.146-1.44333333-6.76533333-3.42933333-.86 1.47533333-.446 3.40533333 1.01533333 4.38266667-.53733333-.01733334-1.044-.16466667-1.486-.41066667-.036 1.52066667 1.054 2.94333333 2.63266667 3.26-.462.12533333-.968.15466667-1.48266667.056.41733334 1.304 1.62933334 2.2526667 3.06666667 2.2793333-1.38 1.082-3.11866667 1.5653334-4.86 1.36 1.45266667.9313334 3.17866667 1.4746667 5.032 1.4746667 6.0946667 0 9.538-5.14733333 9.33-9.764.6413333-.46333333 1.198-1.04133333 1.638-1.69933333z"></path>
                </svg>
              </a>
              <a href="#" class="social-icon">
                <svg height="50" width="50" viewBox="10 22 53 30" xmlns="http://www.w3.org/2000/svg">
                  <g fill="none" fill-rule="evenodd" transform="translate(-.443)">
                    <path d="m.943 0h48v48h-48z"></path><path d="m29.75 14.319c1.159.053 1.789.246 2.208.41.555.215.951.473 1.367.889s.674.812.89 1.367c.163.42.356 1.05.41 2.209.049 1.087.065 1.514.068 3.676v2.26c-.003 2.161-.019 2.589-.069 3.676-.053 1.16-.246 1.79-.41 2.208-.215.555-.473.952-.889 1.368s-.812.674-1.367.89c-.42.162-1.05.356-2.209.409-1.087.05-1.514.065-3.676.069h-2.26c-2.162-.004-2.589-.02-3.676-.069-1.16-.053-1.789-.247-2.208-.41-.555-.215-.952-.473-1.368-.89-.416-.415-.674-.812-.89-1.367-.162-.419-.356-1.049-.409-2.208-.055-1.212-.068-1.604-.07-4.498v-.308c0-3.176.013-3.552.07-4.806.053-1.16.247-1.79.41-2.209.215-.555.473-.95.89-1.367.415-.416.812-.674 1.367-.89.419-.163 1.049-.356 2.208-.41 1.213-.055 1.605-.068 4.498-.069h.308c3.176 0 3.552.012 4.806.07zm-4.783 3.593c-3.376 0-6.112 2.736-6.112 6.111 0 3.376 2.736 6.112 6.112 6.112 3.375 0 6.112-2.736 6.112-6.112 0-3.375-2.737-6.111-6.112-6.111zm0 2.144c2.191 0 3.967 1.776 3.967 3.967 0 2.192-1.776 3.968-3.967 3.968s-3.968-1.776-3.968-3.968c0-2.19 1.777-3.967 3.968-3.967zm6.3-3.844c-.781 0-1.415.634-1.415 1.416s.634 1.416 1.416 1.416 1.415-.634 1.415-1.416-.633-1.416-1.415-1.416z" fill="#1A1A1A"></path>
                  </g>
                </svg>
              </a>
              <a href="#" class="social-icon">
                <svg width="20" height="20" viewBox="0 0 16 12" xmlns="http://www.w3.org/2000/svg">
                  <path fill="#1A1A1A" d="m13.0766667.12266667c-2.4026667-.164-7.75400003-.16333334-10.15333337 0-2.598.17733333-2.904 1.74666666-2.92333333 5.87733333.01933333 4.1233333.32266667 5.6993333 2.92333333 5.8773333 2.4.1633334 7.75066667.164 10.15333337 0 2.598-.1773333 2.904-1.7466666 2.9233333-5.8773333-.0193333-4.12333333-.3226667-5.69933333-2.9233333-5.87733333zm-7.0766667 8.544v-5.33333334l5.3333333 2.662z"></path>
                </svg>
              </a>
              <a href="#" class="social-icon">
                <svg height="25" width="20" viewBox="0 2 20 20" xmlns="http://www.w3.org/2000/svg">
                  <g fill="none" fill-rule="evenodd" transform="translate(-12 -12)">
                    <path d="m0 0h44v44h-44z"></path>
                    <path d="m12.504 18.413h3.899v13.587h-3.899zm1.85-1.7h-.028c-1.411 0-2.326-1.038-2.326-2.353 0-1.342.942-2.36 2.381-2.36 1.438 0 2.323 1.015 2.35 2.356 0 1.315-.912 2.358-2.377 2.358zm17.646 15.287h-4.42v-7.032c0-1.84-.692-3.095-2.212-3.095-1.163 0-1.81.847-2.11 1.665-.114.292-.096.7-.096 1.11v7.352h-4.38s.057-12.455 0-13.587h4.38v2.132c.259-.932 1.658-2.263 3.89-2.263 2.771 0 4.948 1.956 4.948 6.163z" fill="#1A1A1A"></path>
                  </g>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </div>
</body>
</html>

layout2.html:
{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{% block title %}{% endblock %}</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link href="{% static 'css/styles2.css' %}" rel="stylesheet">
        <link rel="icon" type="image/ico" href="/static/img/favicon.ico">
        {% block script %}{% endblock %}
    </head>
    <body>
        <div class="container">
            {% block body %}
            {% endblock %}
        </div>
    </body>
</html>

login.html
{% extends "flight/layout2.html" %}

{% load static %}

{% block title %}
    Sign In | Network
{% endblock %}

{% block body %}
    <div class="user-box">
        <div>
            <center>
                <img src="{% static 'img/icon_logo.png' %}" height="35em" style="margin-bottom: 2vh;">
                <h3>Log in to Flight</h3><br>
            </center>
        </div>
    
        <form action="{% url 'login' %}" method="post" id="signin-form" style="width: 100%;margin-bottom: 5vh;">
            {% csrf_token %}
            <div class="form-group">
                <input class="form-control inp usrnm" type="text" name="username" placeholder="Username" autocomplete="off" autofocus>
            </div>
            <div class="form-group">
                <input class="form-control inp pswd" type="password" name="password" placeholder="Password" autocomplete="off">
                <span class="star"><small>{{message}}</small></span>
            </div>
            <center>
                <input class="btn btn-danger" type="submit" value="Log in" style="margin-top: 10px; width: 95%;" disabled>
            </center>
        </form>
    
        <div>
            <center>
                Don't have an account?&nbsp;&nbsp;<a href="{% url 'register' %}">Sign Up</a>
            </center>
        </div>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll(".inp").forEach(input => {
                input.addEventListener('input', () => {
                    if ((document.querySelector('.usrnm').value.length === 0) || (document.querySelector('.pswd').value.length === 0)) {
                        document.querySelector('input[type="submit"]').disabled = true;
                    }
                    else {
                        document.querySelector('input[type="submit"]').disabled = false;
                    }
                });
            });
        });
    </script>
{% endblock %}




payment_process.html
{% extends 'flight/layout.html' %}

{% load static %}

{% block head %}
    <title>Payment Processing | Flight</title>
    <link rel="stylesheet" href="{% static 'css/payment_process_style.css' %}">
    <script type="text/javascript" src="{% static 'js/payment_process.js' %}"></script>
{% endblock %}

{% block body %}
    <section class="section section1">
        <div class="gif-div">
            <img src="{% static 'img/process.gif' %}" alt="processing">
        </div>
        <div class="header-before">
            Processing Payment...
        </div>
        <div class="below-header">
            Please wait while we are processing your payment.
        </div>
    </section>
    <input type="hidden" class="ref1" value="{{ticket1.ref_no}}">
    <input type="hidden" class="ref2" value="{{ticket2.ref_no}}">
    <section class="section section2">
        <div class="svg-div-c">
            <svg width="5em" height="5em" viewBox="0 0 16 16" class="bi bi-check-circle-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
            </svg>
        </div>
        <div class="header-after">
            Congratulations, Your flight booking is confirmed.
        </div>
        <div class="details-div">
            <div class="flight1">Booking Ref. Number: &nbsp;<span class="ref">{{ticket1.ref_no}}</span>&nbsp;&nbsp;&nbsp;(<span class="from1">{{ticket1.flight.origin.code}}</span> <span>&#8594;</span> <span class="to1">{{ticket1.flight.destination.code}}</span>)</div>
            <div class="flight2">Booking Ref. Number: &nbsp;<span class="ref">{{ticket2.ref_no}}</span>&nbsp;&nbsp;&nbsp;(<span class="from2">{{ticket2.flight.origin.code}}</span> <span>&#8594;</span> <span class="to2">{{ticket2.flight.destination.code}}</span>)</div>
        </div>
        <div class="ticket-div">
            <div>
                <form action="{% url 'getticket' %}" method="get" target="_blank">
                    <input type="hidden" name="ref" value="{{ticket1.ref_no}}">
                    <button type="submit" class="btn btn-outline-primary">Print Ticket ({{ticket1.flight.origin.code}} to {{ticket1.flight.destination.code}})</button>
                </form>
                {% if ticket2 %}
                    <form action="{% url 'getticket' %}" method="get" target="_blank">
                        <input type="hidden" name="ref" value="{{ticket2.ref_no}}">
                        <button type="submit" class="btn btn-outline-primary">Print Ticket ({{ticket2.flight.origin.code}} to {{ticket2.flight.destination.code}})</button>
                    </form>
                {% endif %}
            </div>
        </div>
    </section>
    <section class="section section3">
        <div class="svg-div-e">
            <svg width="5em" height="5em" viewBox="0 0 16 16" class="bi bi-x-circle-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
            </svg>
        </div>
        <div class="header-after star">
            There was an error while processing the payment.
        </div>
        <div class="below-header">
            Please retry after sometime.
        </div>
        <div class="ticket-div">
            <button class="btn btn-outline-primary" type="button" onclick="window.location.href = '/'">Go Home</button>
        </div>
    </section>
{% endblock %}

payment.html:
{% extends 'flight/layout.html' %}

{% load static %}

{% block head %}
    <title>Payment | Flight</title>
    <link rel="stylesheet" href="{% static 'css/payment_style.css' %}">
{% endblock %}

{% block body %}
    <section class="section section1">
        <div class="container">
            <div class="payment-box">
                <div class="payment-box-head-div">
                    <div class="payment-box-head">
                        <h5>Payment Details</h5>
                        <div class="display-td">
                            <img class="card-img" src="{% static 'img/card.png' %}">
                        </div>
                    </div>
                </div>
                <div class="payment-details-input-box">
                    <form action="{% url 'payment' %}" method="POST">
                        {% csrf_token %}
                        <!--<input type="hidden" name="payment_amount" value="{{fare}}">-->
                        <input type="hidden" name="ticket" value="{{ticket}}" required>
                        {% if ticket2 %}
                            <input type="hidden" name="ticket2" value="{{ticket2}}" required>
                        {% endif %}
                        <div class="row payment-amount-div">
                            <div class="form-group">
                                <label for="payment_amount">PAYMENT AMOUNT</label>
                                <input type="text" class="form-control" id="payment_amount" name="fare" value="$ {{fare}}" disabled required>
                            </div>
                        </div>
                        <div class="row card-no-div">
                            <div class="form-group">
                                <label for="card_number">CARD NUMBER</label>
                                <div class="input-group">
                                    <input type="tel" pattern="[0-9]*" class="form-control" id="card_number" name="cardNumber" autocomplete="off" maxlength="19" placeholder="Enter card number" required> <!--onkeypress="return isNumericValue(event);"-->
                                    <div class="input-group-append">
                                        <span class="input-group-text" id="basic-addon2">
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-credit-card" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v1h14V4a1 1 0 0 0-1-1H2zm13 4H1v5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V7z"/>
                                            <path d="M2 10a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-1z"/>
                                        </svg>
                                        </span>
                                    </div>
                                </div>
                                <!--<small id="nameHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>-->
                            </div>
                        </div>
                        <div class="row card-holder-div">
                            <div class="form-group">
                                <label for="card_holder_name">CARD HOLDER'S NAME</label>
                                <input type="text" name="cardHolderName" class="form-control" id="cardHolderName" placeholder="Enter name" required>
                                <!--<small id="nameHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>-->
                            </div>
                        </div>
                        <div class="row expiry-cvv">
                            <div class="row">
                                <div class="left-col">
                                    <label for="expiry_month">EXPIRY DATE</label>
                                    <div class="expiry-input-div">
                                        <div class="month-div">
                                            <select name="expMonth" id="expiry_month" class="form-control" required>
                                                <option value="">Month</option>
                                                <option value="01">01</option>
                                                <option value="02">02</option>
                                                <option value="03">03</option>
                                                <option value="04">04</option>
                                                <option value="05">05</option>
                                                <option value="06">06</option>
                                                <option value="07">07</option>
                                                <option value="08">08</option>
                                                <option value="09">09</option>
                                                <option value="10">10</option>
                                                <option value="11">11</option>
                                                <option value="12">12</option>
                                            </select>
                                        </div>
                                        <div class="yeae-div">
                                            <select name="expYear" id="expiry_year" class="form-control" required>
                                                <option value="">Year</option>
                                                <option value="2020">2020</option>
                                                <option value="2021">2021</option>
                                                <option value="2022">2022</option>
                                                <option value="2023">2023</option>
                                                <option value="2024">2024</option>
                                                <option value="2025">2025</option>
                                                <option value="2026">2026</option>
                                                <option value="2027">2027</option>
                                                <option value="2028">2028</option>
                                                <option value="2029">2029</option>
                                                <option value="2030">2030</option>
                                                <option value="2031">2031</option>
                                                <option value="2032">2032</option>
                                                <option value="2033">2033</option>
                                                <option value="2034">2034</option>
                                                <option value="2035">2035</option>
                                                <option value="2036">2036</option>
                                                <option value="2037">2037</option>
                                                <option value="2038">2038</option>
                                                <option value="2039">2039</option>
                                                <option value="2040">2040</option>
                                                <option value="2041">2041</option>
                                                <option value="2042">2042</option>
                                                <option value="2043">2043</option>
                                                <option value="2044">2044</option>
                                                <option value="2045">2045</option>
                                                <option value="2046">2046</option>
                                                <option value="2047">2047</option>
                                                <option value="2048">2048</option>
                                                <option value="2049">2049</option>
                                                <option value="2050">2050</option>
                                                <option value="2051">2051</option>
                                                <option value="2052">2052</option>
                                                <option value="2053">2053</option>
                                                <option value="2054">2054</option>
                                                <option value="2055">2055</option>
                                                <option value="2056">2056</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="right-col">
                                    <div class="form-group">
                                        <label for="cvv_number">CVV CODE</label>
                                        <input type="password" pattern="[0-9]*" class="form-control" placeholder="CVV" id="cvv_number" name="cvv" maxlength="3">    <!--onkeypress="return isNumericValue(event);"-->
                                        <!--<small id="nameHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>-->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="payment-btn">
                            <button class="btn btn-primary btn-danger">Make payment</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>



    </section>
{% endblock %}

privacy-policy.html:
{% extends 'flight/layout.html' %}

{% load static %}

{% block head %}
    <title>Privacy Policy | Flight</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/privacy-policy.css' %}">
{% endblock head %}

{% block body %}
    <section class="privacybanner-section">
            <img src="{% static 'img/privacy-policy.png' %}" alt="Privacy Policy" class="privacybannerimg">
    </section>
    <section class="section section1">
        <div class="container">
            <p>
                Flight Planners Limited (hereinafter “<b>flight-web-app.herokuapp.com</b>”) understands its valuable customer's concerns for privacy and undertakes several measures of protecting and maintaining theirpersonal information that is being shared with us.
            </p>
            <p>
                The applicability of this Privacy Policy extends to the User who inquires, or means to purchase or purchase the product(s) or service(s) offered by flight-web-app.herokuapp.com. through any of its's online channels including its website, mobile site, mobile app & offline channels including call centers and offices (collectively referred herein as "Sales Channels"). For the purpose of this Privacy Policy, Website means the website(s), mobile site(s) and mobile app(s). By using or accessing the Website or other Sales Channels, the User hereby agrees with the terms of this Privacy Policy and the contents herein. If you disagree with this Privacy Policy please do not use or access our Website or other Sales Channels.
            </p>
            <p>
                This Privacy Policy does not apply to any website(s), mobile sites and mobile apps of third parties, even if their websites/products are linked to our Website. User should take note that information and privacy practices of flight-web-app.herokuapp.com's business partners, advertisers, sponsors or other sites to which flight-web-app.herokuapp.com provides hyperlink(s), may be significantly different from this Privacy Policy. Accordingly, it is recommended that the User reviews the privacy statements and policies of any such third parties with whom they interact.
            </p>
        </div>
    </section>
{% endblock%}

register.html
{% extends "flight/layout2.html" %}

{% load static %}

{% block title %}
    Sign Up | Network
{% endblock %}

{% block script %}
    <script type"text/javascript" src="{% static 'js/signup.js' %}"></script>
{% endblock %}

{% block body %}
    <div class="user-box" style="margin-top: 6vh;">
        <div>
            <center>
                <img src="{% static 'img/icon_logo.png' %}" height="35em" style="margin-bottom: 2vh;">
                <h3>Sign up for Flight</h2><br>
            </center>
        </div>
    
        <form action="{% url 'register' %}" method="post" id="signin-form" style="width: 100%;margin-bottom: 5vh;"  enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group">
                <div class="form-row align-items-center">
                <div class="col-sm-6 my-1">
                    <input class="form-control inp fname" type="text" name="firstname" placeholder="First Name *" autocomplete="off" autofocus>
                    <span class="star small"></span>
                </div>
                <div class="col-sm-6 my-1">
                    <input class="form-control inp lname" type="text" name="lastname" placeholder="Last Name *" autocomplete="off">
                    <span class="star small"></span>
                </div>
            </div>
            </div>
            <div class="form-group">
                <input class="form-control inp usrname" type="text" name="username" placeholder="Username *" autocomplete="off">
                <span class="star small">{{message}}</span>
            </div>
            <div class="form-group">
                <input class="form-control inp email" type="email" name="email" placeholder="Email Address *" autocomplete="off">
                <span class="star small"></span>
            </div>
            <div class="form-group">
                <input class="form-control inp pswd" type="password" name="password" placeholder="Password *" autocomplete="off">
                <span class="star small"></span>
            </div>
            <div class="form-group">
                <input class="form-control inp cpswd" type="password" name="confirmation" placeholder="Confirm Password *" autocomplete="off">
                <span class="star small"></span>
            </div>


            <center>
                <input class="btn btn-danger" type="submit" value="Sign Up" style="margin-top: 10px; width: 95%;" disabled>
            </center>
        </form>
    
        <div>
            <center>
                Already have an account?&nbsp;&nbsp;<a href="{% url 'login' %}">Log in</a>
            </center>
        </div><br><br>
    </div>
{% endblock %}

search.html
{% extends 'flight/layout.html' %}

{% load static %}

{% block head %}
    <title>Search | Flight</title>
    <link rel="stylesheet" href="{% static 'css/search_style.css' %}">
    <link rel="stylesheet" href="{% static 'css/search2_style.css' %}">
    <!--<script src="{% static 'js/search.js' %}"></script>-->
    <script src="{% static 'js/search2.js' %}"></script>
{% endblock %}

{% block body %}
    <section class="section section1">
        <div class="query-data-div">
            <div class="container">
                <div class="trip-places">
                    <div class="from-div text-align-left">
                        <div class="small-label">From</div>
                        <div class="white">{{origin.city}} ({{origin.code}})</div>
                    </div>
                    <div class="trip-type-div white">
                        <div class="small-label">&nbsp;</div>
                        {% if trip_type == '2' %}
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-left-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"/>
                            </svg>
                        {% else %}
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                            </svg>
                        {% endif %}
                    </div>
                    <div class="to-div text-align-right">
                        <div class="small-label">To</div>
                        <div class="white">{{destination.city}} ({{destination.code}})</div>
                    </div>
                </div>
                <div class="v-line"></div>
                <div class="trip-time">
                    <div class="depart-date-div">
                        <div class="small-label">Depart</div>
                        <div class="white">{{depart_date|date:"D, d M Y"}}</div>
                    </div>
                    <div class="return-date-div">
                        <div class="small-label">Return</div>
                        <div class="white">
                            {% if return_date %}
                                {{return_date|date:"D, d M Y"}}
                            {% else %}
                                --
                            {% endif %}
                        </div>
                    </div>
                </div><div class="v-line"></div>
                <div class="trip-class">
                    <div class="return-date-div">
                        <div class="small-label">Class</div>
                        <div class="white">{{seat}}</div>
                    </div>
                </div>
                <div class="v-line"></div>
                <div class="trip-modify">
                    <form action="/" method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="Origin" value="{{origin.code|upper}}">
                        <input type="hidden" name="Destination" value="{{destination.code|upper}}">
                        <input type="hidden" name="DepartDate" value='{{depart_date|date:"Y-m-d"}}'>
                        <input type="hidden" name="ReturnDate" value='{{return_date|date:"Y-m-d"}}'>
                        <input type="hidden" name="SeatClass" value="{{seat|lower}}">
                        <input type="hidden" name="TripType" id="trip-identifier" value="{{trip_type}}">
                        <button class="btn spl-btn" type="submit">Modify Search</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="query-data-div2">
            <div class="container">
                <div class="trip-modify">
                    <form action="/" method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="Origin" value="{{origin.code|upper}}">
                        <input type="hidden" name="Destination" value="{{destination.code|upper}}">
                        <input type="hidden" name="DepartDate" value='{{depart_date|date:"Y-m-d"}}'>
                        <input type="hidden" name="ReturnDate" value='{{return_date|date:"Y-m-d"}}'>
                        <input type="hidden" name="SeatClass" value="{{seat|lower}}">
                        <input type="hidden" name="TripType" value="{{trip_type}}">
                        <button class="btn spl-btn2" type="submit">
                            <svg width="1.3em" height="1.3em" viewBox="0 0 16 16" class="bi bi-arrow-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
                            </svg>
                        </button>
                    </form>
                </div>
                <div class="trip-data">
                    <div class="trip-data-p" style="display: flex; color: white;">
                        <div>{{origin.city}}</div>
                        <div>
                            {% if trip_type == '1' %}
                                &nbsp;
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                                </svg>
                                &nbsp;
                            {% else %}
                                &nbsp;
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-left-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"/>
                                </svg>
                                &nbsp;
                            {% endif %}
                            
                        </div>
                        <div>{{destination.city}}</div>
                    </div>
                    <div class="trip-data-d" style="display: flex; font-size: .8em; color: rgb(240,240,240);">
                        <div>
                            {{depart_date | date:'D, d M'}}
                            {% if trip_type == '2' %}
                                |
                                {{return_date | date:'D, d M'}}     
                            {% endif %}
                            |
                            {{seat}}
                        </div>
                    </div>
                </div>
                <div class="trip-filter">
                    <button class="btn spl-btn2" onclick="show_filter()">
                        <svg width="1.3em" height="1.3em" viewBox="0 0 16 16" class="bi bi-funnel" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        {% if trip_type == '2' and flights %}
            <div class="query-trip-type-div">
                <div class="tabs">
                    <div class="selector"></div>
                    <a href="#" class="active-div" data-trip_type="1">{{origin.code}} &#8594; {{destination.code}}</a>
                    <a href="#" data-trip_type="2">{{origin2.code}} &#8594; {{destination2.code}}</a>
                </div>
                <!--<div>
                    <div id="flight1-btn-div" class="active-div" data-trip_type="1" onclick="trip_type_flight(this)">
                        <span>{{origin.code | upper}}</sapn>
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"></path>
                            </svg>    
                        <span>{{destination.code | upper}}</span>
                    </div>
                    <div id="flight2-btn-div" data-trip_type="2" onclick="trip_type_flight(this)">
                        <span>{{destination.code | upper}}</sapn>
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"></path>
                            </svg>    
                        <span>{{origin.code | upper}}</span>
                    </div>
                </div>-->
            </div>
        {% endif %}
        <div class="query-result-div">
            <div class="container">
                <div class="row">
                    {% if flights %}
                        <div class="col-lg-3 filter-div">
                            <div class="close-filter" style="margin-top: 0;">
                                <button class="btn b1" onclick="close_filter(this)">
                                    <svg width="1.2em" height="1.2em" viewBox="0 0 16 16" class="bi bi-arrow-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="filter">
                                <center>
                                    <h4>Filter Results</h4>
                                </center>
                                <div class="filter-box">
                                    <div class="filter-price">
                                        <div class="font-weight-bold">Price</div>
                                        <div>
                                            <input type="range" class="form-control-range" min="{{min_price}}" max="{{max_price}}" value="{{max_price}}" oninput="filter()">
                                            <div class="price-range-output">
                                                <div class="initial-price-range">
                                                    <span class="currency-symbol">₹</span>
                                                    <span class="initial-price-value">{{min_price}}</span>
                                                </div>
                                                <div class="final-price-range">
                                                    <span class="currency-symbol">₹</span>
                                                    <span class="final-price-value"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div><!---->
                                    <div class="time-slot departure-time-slot-group">
                                        <div class="font-weight-bold">Departure Time</div>
                                        <div style="display: flex; justify-content: space-between;">
                                            <div class="square-box" onclick="filter(this)" data-type="departure" data-start="0" data-end="6">
                                                <div class="filter-img-div">
                                                    <div>
                                                        <img src="{% static 'img/morning_inactive.png' %}" alt="" data-statefor="inactive">
                                                        <img src="{% static 'img/morning_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                    </div>
                                                </div>
                                                <div>
                                                    Before 6 AM
                                                </div>
                                            </div>
                                            <div class="square-box" onclick="filter(this)" data-type="departure" data-start="6" data-end="12">
                                                <div class="filter-img-div">
                                                    <div>
                                                        <img src="{% static 'img/noon_inactive.png' %}" alt="" data-statefor="inactive">
                                                        <img src="{% static 'img/noon_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                    </div>
                                                </div>
                                                <div>
                                                    6 am - 12 pm
                                                </div>
                                            </div>
                                            <div class="square-box" onclick="filter(this)" data-type="departure" data-start="12" data-end="18">
                                                <div class="filter-img-div">
                                                    <div>
                                                        <img src="{% static 'img/evening_inactive.png' %}" alt="" data-statefor="inactive">
                                                        <img src="{% static 'img/evening_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                    </div>
                                                </div>
                                                <div>
                                                    12 pm - 6 pm
                                                </div>
                                            </div>
                                            <div class="square-box" onclick="filter(this)" data-type="departure" data-start="18" data-end="24">
                                                <div class="filter-img-div">
                                                    <div>
                                                        <img src="{% static 'img/night_inactive.png' %}" alt="" data-statefor="inactive">
                                                        <img src="{% static 'img/night_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                    </div>
                                                </div>
                                                <div>
                                                    After 6 pm
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="time-slot arrival-time-slot-group">
                                        <div class="font-weight-bold">Arrival Time</div>
                                        <div style="display: flex; justify-content: space-between;">
                                            <div class="square-box" onclick="filter(this)" data-type="arrival" data-start="0" data-end="6">
                                                <div class="filter-img-div">
                                                    <div>
                                                        <img src="{% static 'img/morning_inactive.png' %}" alt="" data-statefor="inactive">
                                                        <img src="{% static 'img/morning_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                    </div>
                                                </div>
                                                <div>
                                                    Before 6 AM
                                                </div>
                                            </div>
                                            <div class="square-box" onclick="filter(this)" data-type="arrival" data-start="6" data-end="12">
                                                <div class="filter-img-div">
                                                    <div>
                                                        <img src="{% static 'img/noon_inactive.png' %}" alt="" data-statefor="inactive">
                                                        <img src="{% static 'img/noon_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                    </div>
                                                </div>
                                                <div>
                                                    6 am - 12 pm
                                                </div>
                                            </div>
                                            <div class="square-box" onclick="filter(this)" data-type="arrival" data-start="12" data-end="18">
                                                <div class="filter-img-div">
                                                    <div>
                                                        <img src="{% static 'img/evening_inactive.png' %}" alt="" data-statefor="inactive">
                                                        <img src="{% static 'img/evening_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                    </div>
                                                </div>
                                                <div>
                                                    12 pm - 6 pm
                                                </div>
                                            </div>
                                            <div class="square-box" onclick="filter(this)" data-type="arrival" data-start="18" data-end="24">
                                                <div class="filter-img-div">
                                                    <div>
                                                        <img src="{% static 'img/night_inactive.png' %}" alt="" data-statefor="inactive">
                                                        <img src="{% static 'img/night_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                    </div>
                                                </div>
                                                <div>
                                                    After 6 pm
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="clr-filter-div">
                                    <center>
                                        <button class="btn-link">Reset Filters</button>
                                    </center>
                                </div>
                            </div>
                            <div class="close-filter">
                                <button class="btn btn-danger b2" onclick="close_filter(this)">
                                    SHOW RESULTS
                                </button>
                            </div>
                        </div>
                        <div class="col-lg-9 actual-result-div">
                            <div class="sort-div" style="display:none">
                                <div class="sort-label">Sort By:</div>
                                <div style="display: flex;">
                                    <div class="sort-depart">
                                        Depart
                                        <span>--</span>
                                    </div>
                                    <div class="sort-arrive">
                                        Arrive
                                        <span>--</span>
                                    </div>
                                </div>
                                <div class="sort-price">
                                    Price
                                    <span><!--&#8593;--><!--&#8595;--></span>
                                </div>
                            </div>


                            {% if flights %}
                                <div class="sort-div">
                                <div class="flight-company">
                                    <div class="sort-label">Sort By:</div>
                                </div>
                                <div class="flight-time">
                                    <div class="flight-origin-time sort-depart">
                                        Depart
                                        <span></span>
                                    </div>
                                    <div class="flight-stops"></div>
                                    <div class="flight-destination-time sort-arrive">
                                        Arrive
                                        <span></span>
                                    </div>
                                </div>
                                <div class="flight-details">
                                    Price
                                    <span><!--&#8593;--><!--&#8595;--></span>
                                </div>
                            </div>
                            {% endif %}




                            <div id="flights_div">
                                {% for flight in flights %}

                                    <div class="each-flight-div-box show">
                                        <div class="each-flight-div" onclick="media_click(this)">
                                            <div class="flight-company">
                                                <div class="flight-icon">
                                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1.5em" height="1.3em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 440 384"><path d="M14 335h405v43H14v-43zm417.5-199.5q3.5 12.5-3 24T409 175l-114 30l-92 25l-114 30l-34 10l-16-29l-39-67l31-9l42 33l106-28L91 17l41-11l147 137l113-30q13-4 24.5 3t15 19.5z" fill="#434445"/><rect x="0" y="0" width="440" height="384" fill="rgba(0, 0, 0, 0)" /></svg>
                                                </div>
                                                <div class="company-details">
                                                    <div class="company-name">{{flight.airline}}</div>
                                                    <div class="plane-name">{{flight.plane}}</div>
                                                </div>
                                            </div>
                                            <div class="flight-time flight-time-div">
                                                <div class="flight-origin-time">
                                                    <div class="flight-time">
                                                        <h5>{{flight.depart_time|time:"H:i"}}</h5>
                                                    </div>
                                                    <div class="flight-place">
                                                        {{flight.origin.city}}
                                                    </div>
                                                </div>
                                                <div class="flight-stops tooltip">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="34" height="24" viewBox="0 0 24 24">
                                                        <path d="M13,9.03544443 C14.6961471,9.27805926 16,10.736764 16,12.5 C16,14.263236 14.6961471,15.7219407 13,15.9645556 L13,21.5207973 C13,21.7969397 12.7761424,22.0207973 12.5,22.0207973 C12.2238576,22.0207973 12,21.7969397 12,21.5207973 L12,15.9645556 C10.3038529,15.7219407 9,14.263236 9,12.5 C9,10.736764 10.3038529,9.27805926 12,9.03544443 L12,3.5 C12,3.22385763 12.2238576,3 12.5,3 C12.7761424,3 13,3.22385763 13,3.5 L13,9.03544443 L13,9.03544443 Z M12.5,15 C13.8807119,15 15,13.8807119 15,12.5 C15,11.1192881 13.8807119,10 12.5,10 C11.1192881,10 10,11.1192881 10,12.5 C10,13.8807119 11.1192881,15 12.5,15 Z" transform="rotate(90 12.5 12.51)"/>
                                                    </svg>
                                                    <span class="tooltiptext" data-value="{{flight.duration}}"></span><!--07 hrs 50 mins-->
                                                </div>
                                                <div class="flight-destination-time">
                                                    <div class="flight-time">
                                                        <h5>{{flight.arrival_time|time:"H:i"}}</h5>
                                                    </div>
                                                    <div class="flight-place">
                                                        {{flight.destination.city}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="flight-details">
                                                <div class="flight-price">
                                                    <h5>
                                                        ₹ 
                                                        <span>
                                                            {% if seat == 'Economy' %}{{flight.economy_fare}}{% endif %}
                                                            {% if seat == 'Business' %}{{flight.business_fare}}{% endif %}
                                                            {% if seat == 'First' %}{{flight.first_fare}}{% endif %}
                                                        </span>
                                                    </h5>
                                                </div>
                                                <div class="flight-details-btn">


                                                    {% if trip_type == '2' %}
                                                        {% if forloop.couter == 1 %}checked{% endif %}
                                                        <input type="radio" class="flight1-radio r-b" name="test1" value="{{flight.id}}" data-plane='{{flight.plane}}' data-depart='{{flight.depart_time|time:"H:i"}}' data-arrive='{{flight.arrival_time|time:"H:i"}}' data-fare="{% if seat == 'Economy' %} {{flight.economy_fare}} {% elif seat == 'Business' %} {{flight.business_fare}} {% else %} {{flight.first_fare}} {% endif %}" {% if forloop.counter == 1 %}checked{% endif %}>
                                                    {% else %}
                                                        <form action="{% url 'review' %}" method="GET" style="display: flex;">
                                                            <input type="hidden" name="flight1Id" value="{{flight.id}}">
                                                            <input type="hidden" name="flight1Date", value="{{depart_date|date:'d-m-Y'}}">
                                                            <input type="hidden" name="seatClass" value="{{seat}}">
                                                            <button class="btn btn-primary btn-danger o-b" type="submit">
                                                            
                                                                Book Flight <!--&#8594;-->
                                                            </button>
                                                        </form>
                                                    {% endif %}


                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                {% endfor %}
                            </div>
                        </div>
                    {% else %}
                        <div style="height: 100%; width:100%; padding: 10%;">
                            <div style="text-align: center; margin: auto;">
                                <svg width="4em" height="4em" viewBox="0 0 16 16" class="bi bi-exclamation-circle" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                                </svg>
                                <br><br>
                                <h3>Sorry, No Flight for this Search</h3>
                                <p>
                                    We cannnot find any flights for the cabin class of your search. Please modify your search criteria and try again.
                                </p>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% if trip_type == '2' and flights %}
            <div class="query-result-div-2" style="display: none;">
                <div class="container">
                    <div class="row">
                        {% if flights2 %}
                            <div class="col-lg-3 filter-div">
                                <div class="close-filter" style="margin-top: 0;">
                                    <button class="btn b1" onclick="close_filter(this)">
                                        <svg width="1.2em" height="1.2em" viewBox="0 0 16 16" class="bi bi-arrow-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="filter">
                                    <center>
                                        <h4>Filter Results</h4>
                                    </center>
                                    <div class="filter-box">
                                        <div class="filter-price2">
                                            <div class="font-weight-bold">Price</div>
                                            <div>
                                                <input type="range" class="form-control-range" min="{{min_price2}}" max="{{max_price2}}" value="{{max_price2}}" oninput="filter2()">
                                                <div class="price-range-output">
                                                    <div class="initial-price-range">
                                                        <span class="currency-symbol">₹</span>
                                                        <span class="initial-price-value">{{min_price2}}</span>
                                                    </div>
                                                    <div class="final-price-range">
                                                        <span class="currency-symbol">₹</span>
                                                        <span class="final-price-value"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div><!---->
                                        <div class="time-slot2 departure-time-slot-group2">
                                            <div class="font-weight-bold">Departure Time</div>
                                            <div style="display: flex; justify-content: space-between;">
                                                <div class="square-box" onclick="filter2(this)" data-type="departure" data-start="0" data-end="6">
                                                    <div class="filter-img-div">
                                                        <div>
                                                            <img src="{% static 'img/morning_inactive.png' %}" alt="" data-statefor="inactive">
                                                            <img src="{% static 'img/morning_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div>
                                                        Before 6 AM
                                                    </div>
                                                </div>
                                                <div class="square-box" onclick="filter2(this)" data-type="departure" data-start="6" data-end="12">
                                                    <div class="filter-img-div">
                                                        <div>
                                                            <img src="{% static 'img/noon_inactive.png' %}" alt="" data-statefor="inactive">
                                                            <img src="{% static 'img/noon_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div>
                                                        6 am - 12 pm
                                                    </div>
                                                </div>
                                                <div class="square-box" onclick="filter2(this)" data-type="departure" data-start="12" data-end="18">
                                                    <div class="filter-img-div">
                                                        <div>
                                                            <img src="{% static 'img/evening_inactive.png' %}" alt="" data-statefor="inactive">
                                                            <img src="{% static 'img/evening_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div>
                                                        12 pm - 6 pm
                                                    </div>
                                                </div>
                                                <div class="square-box" onclick="filter2(this)" data-type="departure" data-start="18" data-end="24">
                                                    <div class="filter-img-div">
                                                        <div>
                                                            <img src="{% static 'img/night_inactive.png' %}" alt="" data-statefor="inactive">
                                                            <img src="{% static 'img/night_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div>
                                                        After 6 pm
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="time-slot2 arrival-time-slot-group2">
                                            <div class="font-weight-bold">Arrival Time</div>
                                            <div style="display: flex; justify-content: space-between;">
                                                <div class="square-box" onclick="filter2(this)" data-type="arrival" data-start="0" data-end="6">
                                                    <div class="filter-img-div">
                                                        <div>
                                                            <img src="{% static 'img/morning_inactive.png' %}" alt="" data-statefor="inactive">
                                                            <img src="{% static 'img/morning_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div>
                                                        Before 6 AM
                                                    </div>
                                                </div>
                                                <div class="square-box" onclick="filter2(this)" data-type="arrival" data-start="6" data-end="12">
                                                    <div class="filter-img-div">
                                                        <div>
                                                            <img src="{% static 'img/noon_inactive.png' %}" alt="" data-statefor="inactive">
                                                            <img src="{% static 'img/noon_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div>
                                                        6 am - 12 pm
                                                    </div>
                                                </div>
                                                <div class="square-box" onclick="filter2(this)" data-type="arrival" data-start="12" data-end="18">
                                                    <div class="filter-img-div">
                                                        <div>
                                                            <img src="{% static 'img/evening_inactive.png' %}" alt="" data-statefor="inactive">
                                                            <img src="{% static 'img/evening_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div>
                                                        12 pm - 6 pm
                                                    </div>
                                                </div>
                                                <div class="square-box" onclick="filter2(this)" data-type="arrival" data-start="18" data-end="24">
                                                    <div class="filter-img-div">
                                                        <div>
                                                            <img src="{% static 'img/night_inactive.png' %}" alt="" data-statefor="inactive">
                                                            <img src="{% static 'img/night_active.png' %}" alt="" data-statefor="active" style="display: none;">
                                                        </div>
                                                    </div>
                                                    <div>
                                                        After 6 pm
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clr-filter-div2">
                                        <center>
                                            <button class="btn-link">Reset Filters</button>
                                        </center>
                                    </div>
                                </div>
                                <div class="close-filter">
                                    <button class="btn btn-danger b2" onclick="close_filter(this)">
                                        SHOW RESULTS
                                    </button>
                                </div>
                            </div>
                            <div class="col-lg-9 actual-result-div">
                                <div class="sort-div" style="display:none">
                                    <div class="sort-label">Sort By:</div>
                                    <div style="display: flex;">
                                        <div class="sort-depart">
                                            Depart
                                            <span>--</span>
                                        </div>
                                        <div class="sort-arrive">
                                            Arrive
                                            <span>--</span>
                                        </div>
                                    </div>
                                    <div class="sort-price">
                                        Price
                                        <span><!--&#8593;--><!--&#8595;--></span>
                                    </div>
                                </div>


                                {% if flights2 %}
                                    <div class="sort-div">
                                    <div class="flight-company">
                                        <div class="sort-label">Sort By:</div>
                                    </div>
                                    <div class="flight-time">
                                        <div class="flight-origin-time sort-depart">
                                            Depart
                                            <span></span>
                                        </div>
                                        <div class="flight-stops2"></div>
                                        <div class="flight-destination-time2 sort-arrive">
                                            Arrive
                                            <span></span>
                                        </div>
                                    </div>
                                    <div class="flight-details">
                                        Price
                                        <span><!--&#8593;--><!--&#8595;--></span>
                                    </div>
                                </div>
                                {% endif %}




                                <div id="flights_div2">
                                    {% for flight2 in flights2 %}

                                        <div class="each-flight-div-box show">
                                            <div class="each-flight-div" onclick="media_click(this)">
                                                <div class="flight-company">
                                                    <div class="flight-icon">
                                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1.5em" height="1.3em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 440 384"><path d="M14 335h405v43H14v-43zm417.5-199.5q3.5 12.5-3 24T409 175l-114 30l-92 25l-114 30l-34 10l-16-29l-39-67l31-9l42 33l106-28L91 17l41-11l147 137l113-30q13-4 24.5 3t15 19.5z" fill="#434445"/><rect x="0" y="0" width="440" height="384" fill="rgba(0, 0, 0, 0)" /></svg>
                                                    </div>
                                                    <div class="company-details">
                                                        <div class="company-name">{{flight2.airline}}</div>
                                                        <div class="plane-name">{{flight2.plane}}</div>
                                                    </div>
                                                </div>
                                                <div class="flight-time">
                                                    <div class="flight-origin-time">
                                                        <div class="flight-time">
                                                            <h5>{{flight2.depart_time|time:"H:i"}}</h5>
                                                        </div>
                                                        <div class="flight-place">
                                                            {{flight2.origin.city}}
                                                        </div>
                                                    </div>
                                                    <div class="flight-stops2 tooltip">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="34" height="24" viewBox="0 0 24 24">
                                                            <path d="M13,9.03544443 C14.6961471,9.27805926 16,10.736764 16,12.5 C16,14.263236 14.6961471,15.7219407 13,15.9645556 L13,21.5207973 C13,21.7969397 12.7761424,22.0207973 12.5,22.0207973 C12.2238576,22.0207973 12,21.7969397 12,21.5207973 L12,15.9645556 C10.3038529,15.7219407 9,14.263236 9,12.5 C9,10.736764 10.3038529,9.27805926 12,9.03544443 L12,3.5 C12,3.22385763 12.2238576,3 12.5,3 C12.7761424,3 13,3.22385763 13,3.5 L13,9.03544443 L13,9.03544443 Z M12.5,15 C13.8807119,15 15,13.8807119 15,12.5 C15,11.1192881 13.8807119,10 12.5,10 C11.1192881,10 10,11.1192881 10,12.5 C10,13.8807119 11.1192881,15 12.5,15 Z" transform="rotate(90 12.5 12.51)"/>
                                                        </svg>
                                                        <span class="tooltiptext" data-value="{{flight2.duration}}"></span><!--07 hrs 50 mins-->
                                                    </div>
                                                    <div class="flight-destination-time2">
                                                        <div class="flight-time">
                                                            <h5>{{flight2.arrival_time|time:"H:i"}}</h5>
                                                        </div>
                                                        <div class="flight-place">
                                                            {{flight2.destination.city}}
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="flight-details">
                                                    <div class="flight-price">
                                                        <h5>
                                                            ₹ 
                                                            <span>
                                                                {% if seat == 'Economy' %}{{flight2.economy_fare}}{% endif %}
                                                                {% if seat == 'Business' %}{{flight2.business_fare}}{% endif %}
                                                                {% if seat == 'First' %}{{flight2.first_fare}}{% endif %}
                                                            </span>
                                                        </h5>
                                                    </div>
                                                    <div class="flight-details-btn">



                                                        {% if trip_type == '2' %}
                                                            {% if forloop.couter == 1 %}checked{% endif %}
                                                            <input type="radio" class="flight2-radio r-b" name="test2" value="{{flight2.id}}" data-plane='{{flight2.plane}}' data-depart='{{flight2.depart_time|time:"H:i"}}' data-arrive='{{flight2.arrival_time|time:"H:i"}}' data-fare="{% if seat == 'Economy' %} {{flight2.economy_fare}} {% elif seat == 'Business' %} {{flight2.business_fare}} {% else %} {{flight2.first_fare}} {% endif %}" {% if forloop.counter == 1 %}checked{% endif %}>
                                                        {% else %}
                                                            <form action="{% url 'review' %}" method="GET" style="display: flex;">
                                                                <input type="hidden" name="flight1Id" value="{{flight2.id}}">
                                                                <input type="hidden" name="flight1Date", value="{{depart_date|date:'d-m-Y'}}">
                                                                <input type="hidden" name="seatClass" value="{{seat}}">
                                                                <button class="btn btn-primary btn-danger" type="submit">
                                                                    Book Flight &#8594;
                                                                </button>
                                                            </form>
                                                        {% endif %}


                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    {% endfor %}
                                </div>
                            </div>
                        {% else %}
                            <div style="height: 100%; width:100%; padding: 10%;">
                                <div style="text-align: center; margin: auto;">
                                    <svg width="4em" height="4em" viewBox="0 0 16 16" class="bi bi-exclamation-circle" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                        <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                                    </svg>
                                    <br><br>
                                    <h3>Sorry, No Flight for this Search</h3>
                                    <p>
                                        We cannnot find any flights for the cabin class of your search. Please modify your search criteria and try again.
                                    </p>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="selection-div">
                <div class="col-3 selection1">
                    <div class="white">
                        <div>
                            <span>{{origin.code|upper}}</span>
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                            </svg>
                            <span>{{destination.code|upper}}</span>&nbsp;&nbsp;@&nbsp;&nbsp;₹
                            <span id="select-f1-fare">
                                {% if seat == "Economy" %}
                                    {{flights.all.0.economy_fare}}
                                {% elif seat == "Business" %}
                                    {{flights.all.0.business_fare}}
                                {% else %}
                                    {{flights.all.0.first_fare}}
                                {% endif %}
                            </span><!---->
                        </div>
                        <div class="white-2">
                            <span id="select-f1-plane">{{flights.all.0.plane}}</span><!---->
                            &nbsp;&nbsp;
                            <span id="select-f1-depart">{{flights.all.0.depart_time | time:"H:i"}}</span><!---->
                            •
                            <span id="select-f1-arrive">{{flights.all.0.arrival_time | time:"H:i"}}</span><!---->
                        </div>
                    </div>
                </div>
                <div class="col-3 selection2">
                    <div class="white">
                        <div>
                            <span>{{destination.code|upper}}</span>
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                            </svg>
                            <span>{{origin.code|upper}}</span>
                            &nbsp;&nbsp;@&nbsp;&nbsp;₹
                            {% if flights2 %}
                                &nbsp;&nbsp;@&nbsp;&nbsp;₹
                                <span id="select-f2-fare">
                                    {% if seat == "Economy" %}
                                        {{flights2.all.0.economy_fare}}
                                    {% elif seat == "Business" %}
                                        {{flights2.all.0.business_fare}}
                                    {% else %}
                                        {{flights2.all.0.first_fare}}
                                    {% endif %}
                                </span><!---->
                            {% endif %}
                        </div>
                        <div class="white-2">
                            {% if flights2 %}
                                <span id="select-f2-plane">{{flights2.all.0.plane}}</span><!---->
                                &nbsp;&nbsp;
                                <span id="select-f2-depart">{{flights2.all.0.depart_time | time:"H:i"}}</span><!---->
                                •
                                <span id="select-f2-arrive">{{flights2.all.0.arrival_time | time:"H:i"}}</span><!---->
                            {% else %}
                                <span id="select-f2-plane" style="letter-spacing: 2px!important;">--</span><!---->
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="col-3 selection-total">
                    <div class="white">
                        <div class="white-2">
                            <span>TOTAL FARE</span>
                        </div>
                        <div>
                            <span>₹
                                <span id="select-total-fare">
                                    {% if flights2 %}
                                        {% if seat == "Economy" %}
                                            {{flights.all.0.economy_fare | add:flights2.all.0.economy_fare}}
                                        {% elif seat == "Business" %}
                                            {{flights.all.0.business_fare | add:flights2.all.0.business_fare}}
                                        {% else %}
                                            {{flights.all.0.first_fare | add:flights2.all.0.first_fare}}
                                        {% endif %}
                                    {% else %}
                                        {% if seat == "Economy" %}
                                            {{flights.all.0.economy_fare}}
                                        {% elif seat == "Business" %}
                                            {{flights.all.0.business_fare}}
                                        {% else %}
                                            {{flights.all.0.first_fare}}
                                        {% endif %}
                                    {% endif %}
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-3 selection-confirm">
                    <div class="white">
                        <div>
                            <form action="{% url 'review' %}" method="GET">
                                <input type="hidden" name="flight1Id" value="{{flights.all.0.id}}" id="flt1">
                                <input type="hidden" name="flight1Date", value="{{depart_date|date:'d-m-Y'}}">
                                <input type="hidden" name="flight2Id" value="{{flights2.all.0.id}}" id="flt2">
                                <input type="hidden" name="flight2Date", value="{{return_date|date:'d-m-Y'}}">
                                <input type="hidden" name="seatClass" value="{{seat}}">
                                <button class="btn btn-light" type="submit">Continue &#8594;</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="selection-media">
                    <div>
                        <div class="col-7" style="display: flex; justify-content: space-between;">
                            <div class="col-5" style="padding: 0; text-align: left;">
                                <div>TOTAL</div>
                                <div>AMOUNT</div>
                            </div>
                            <div class="col-7" style="font-size: 1.2em; font-weight: bold; display: flex; padding: 0;">
                                <span style="margin: auto;">₹
                                    <span id="select-total-fare-media">
                                        {% if flights2 %}
                                            {% if seat == "Economy" %}
                                                {{flights.all.0.economy_fare | add:flights2.all.0.economy_fare}}
                                            {% elif seat == "Business" %}
                                                {{flights.all.0.business_fare | add:flights2.all.0.business_fare}}
                                            {% else %}
                                                {{flights.all.0.first_fare | add:flights2.all.0.first_fare}}
                                            {% endif %}
                                        {% else %}
                                            {% if seat == "Economy" %}
                                                {{flights.all.0.economy_fare}}
                                            {% elif seat == "Business" %}
                                                {{flights.all.0.business_fare}}
                                            {% else %}
                                                {{flights.all.0.first_fare}}
                                            {% endif %}
                                        {% endif %}
                                    </span>
                                </span>
                            </div>
                        </div>
                        <div class="col-5" style="display: flex;">
                            <div style="margin: auto;">
                                <form action="{% url 'review' %}" method="GET">
                                    <input type="hidden" name="flight1Id" value="{{flights.all.0.id}}" id="flt1">
                                    <input type="hidden" name="flight1Date", value="{{depart_date|date:'d-m-Y'}}">
                                    <input type="hidden" name="flight2Id" value="{{flights2.all.0.id}}" id="flt2">
                                    <input type="hidden" name="flight2Date", value="{{return_date|date:'d-m-Y'}}">
                                    <input type="hidden" name="seatClass" value="{{seat}}">
                                    <button class="btn btn-light" type="submit">Continue &#8594;</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    </section>
{% endblock %}


terms.html
{% extends 'flight/layout.html' %}

{% load static %}

{% block head %}
    <title>Terms and Conditions | Flight</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/privacy-policy.css' %}">
{% endblock head %}

{% block body %}
    <section class="privacybanner-section">
            <img src="{% static 'img/terms-and-conditions.png' %}" alt="Privacy Policy" class="privacybannerimg">
    </section>
    <section class="section section1">
        <div class="container">
            <p>
                The travel site www.flight-web-app.herokuapp.com is maintained by Flight Inc. It is an IATA certified travel company existing compliant with the laws of the Republic of India. By accessing or using this site or using any of its services, you are agreed on terms and conditions mentioned below, including any supplementary guidelines and future modifications.
            </p>
            <p>
                Flight may change, alter or remove any part of these below written Terms and Conditions without any prior notice. Any changes done in this Terms and Conditions of Use will be applicable the moment they are posted on the site. You need to re-check the “Terms & Conditions” link to be fully aware of the entire scenario.
            </p>
            <p>
                <b>1. Agreement between the Clients & Flight:</b><br>
                While accessing, using, browsing or make booking through flight-web-app.herokuapp.com, users have to accept that they are agreed to the terms and conditions of our portal. In case of any violation, Flight Planners Ltd. and its subsidiaries (including flight-web-app.herokuapp.com) reserve all the rights for taking any legal actions against them.
            </p>
            <p>
                <b>2. Prices on the Website:</b><br>
                Service Charge, Cancellation Charge, Reschedule charge are inclusive of GST<br>
                The price, which we offer on flight-web-app.herokuapp.com, is generally includes accommodation charges, taxes (unless specified otherwise) and in special cases some meals (Breakfast /Lunch / Dinner). It never comprises any personal expense or other additional charges like telephone calls, personal-man services, entrance fees of any monuments and bar charges, etc.
            </p>
            <p>
                <b>3. Mode of Payments & the Policies:</b><br>
                Our payment gateway is completely secure and customers can make the online payments through a safe transaction process that ensures their personal security codes will not be revealed in any circumstances.
            </p>
            <p>
                <b>4. Use of the Website</b><br>
                <b>In case of your use of this website, you agree that:</b>
                <ul>
                    <li>You have the legal authority to create an obligatory legal requirement and enter into these Terms of Use.</li>
                    <li>You will use this site as per its Terms of Use.</li>
                    <li>You will use the website only to make lawful bookings for you or other person for whom you are officially approved to do these kinds of bookings. You will also inform other persons about the Terms and Condition of the website</li>
                    <li>You will provide accurate information about every official document and other important details like name and DOB to the site in case of planning trip with it.</li>
                    <li>In case of any error or mistake in the process of information, you will be solely responsible for the same.</li>
                    <li>All information provided by you to this site should be accurate, updated and complete,</li>
                    <li>If you have an account on this site, you are advised to secure it with your login details, including login ID and password. You will be entirely responsible for any use or misuse of your account.</li>
                    <li>Flight reserves the right to deny access to its Website to anyone, at any time without any notice and for any reason, including, but not restricted to, for the violation of its Terms of Use.</li>
                </ul>

        </div>
    </section>
{% endblock%}

ticket.html:
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/ico" href="/static/img/favicon.ico">
    <title>e-Ticket</title>
    <style>
        @page{
            margin: 37px 50px;
        }
        *{
            padding: 0;
            margin: 0;
            font-family: sans-serif;
        }
        body{
            padding: 7% 7%;
        }
        nav{
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .logo{
            display: flex;
        }
        .header{
            text-align: right;
            font-size: 2em;
            font-weight: 600;
        }
        li{
            margin-top: 5px;
            margin-bottom: 5px;
        }
        .col{
            -ms-flex-preferred-size:0;
            flex-basis:0;
            -ms-flex-positive:1;
            flex-grow:1;
            max-width:100%
        }
        table{
            margin-top: 0;
            width: 100%;
        }
        .table{
            margin-top: 25px;
        }
        tr{
            width: 100%;
        }
        th{
            width: 25%;
            text-align: left;
            padding: 5px 20px;
        }
        td{
            width: 25%;
            text-align: left;
            padding: 5px 15px;
        }
        caption{
            text-align: left;
            background-color: #a9a9a9;
            color: white;
            padding: 8px 15px;
            font-weight: bold;
        }
        .tr-caption{
            text-align: left;
            background-color: #a9a9a9;
            color: white;
            padding: 0;
            font-weight: bold;
            width: 100%;
            font-size: 1.4em;
        }
        .tr-even{
            background-color: #f0f0f0;
        }
        .tr-odd{
            background-color: white;
        }
    </style>
</head>
<body>
    <nav>
        <div class="col logo" style="width: 50%;">
            <!--<img src="{% static 'img/icon_logo.png' %}" width="45%">-->
            <span style="color: rgb(225, 35, 35); font-weight: bold; font-size: 2.5em;">FLIGHT</span>
        </div>
        <div class="col header" style="width: 50%;">
            <span style="margin: auto 0 auto auto;">E-Ticket</span>
        </div>
    </nav>
    <hr style="height: 1px; border: 0; background-color: grey;" noshade>
    <main style="padding: 10px;">
        <div style="margin: 15px auto;">
            <h3>Important information</h3>
            <ul style="padding-left: 50px;">
                <li>
                    This is your E-Ticket Iternary. You must bring it to the airport for check-in, and it is recommended you to retain a copy for your records.
                </li>
                <li>
                    Each passenger travelling needs a printed copy of this document for immigrations, customs, airport security checks and duty free purchases.
                </li>
                <li>
                    Economy Class passengers should report to airline check-in desks 3 hours prior to departure of all flights. First and Business Class passengers should report to airline check-in desks not later than 1 hour prior to departure. Boarding for your flight begins at least 35 minutes before your scheduled departure time. Gates close 15 minutes prior to departure
                </li>
            </ul>
        </div>
        <div class="table-div">
            <table class="table">
                <tr class="tr-caption">
                    <td style="width: 100%;">TICKET INFORMATION</td>
                </tr>
            </table>
            <table cellspacing='0' >
                <tr class="tr-odd">
                    <th>TICKET REFERENCE</th>
                    <td>{{ticket1.ref_no | upper}}</td>
                    <th>BOOKING DATE & TIME</th>
                    <td>{{ticket1.booking_date | date:'d M y' | upper}}<br>{{ticket1.booking_date | time:'Hi' | upper}}</td>
                </tr>
                <tr class="tr-even">
                    <th>FLIGHT DATE</th>
                    <td>{{ticket1.flight_ddate | date:'d M y' | upper}}</td>
                    <th>CLASS</th>
                    <td>{{ticket1.seat_class | upper}}</td>
                </tr>
                <tr class="tr-odd">
                    <th>EMAIL</th>
                    <td>{{ticket1.email}}</td>
                    <th>MOBILE</th>
                    <td>{{ticket1.mobile}}</td>
                </tr>
                <tr class="tr-even">
                    <th>STATUS</th>
                    <td>{{ticket1.status | upper}}</td>
                    <th></th>
                    <td></td>
                </tr>
            </table>
            <table class="table">
                <tr class="tr-caption">
                    <td style="width: 100%;">PASSENGER INFORMATION</td>
                </tr>
            </table>
            <table cellspacing='0'>
                <tr class="tr-odd">
                    <th>S NO.</th>
                    <th>PASSENGER NAME</th>
                    <th>SEX</th>
                    <th>CLASS</th>
                </tr>
                {% for passenger in ticket1.passengers.all %}
                    {% if forloop.counter|divisibleby:2 %}
                        <tr class="tr-odd">
                            <td style="width: 20%; padding-left: 20px;">{{forloop.counter}}</td>
                            <td style="width: 35%; padding-left: 20px;">{{passenger.last_name | upper}}/{{passenger.first_name | upper}}</td>
                            <td style="width: 20%; padding-left: 20px;">{{passenger.gender | upper}}</td>
                            <td style="width: 25%; padding-left: 20px;">{{ticket1.seat_class | upper}}</td>
                        </tr>
                    {% else %}
                        <tr class="tr-even">
                            <td style="width: 20%; padding-left: 20px;">{{forloop.counter}}</td>
                            <td style="width: 35%; padding-left: 20px;">{{passenger.last_name | upper}}/{{passenger.first_name | upper}}</td>
                            <td style="width: 20%; padding-left: 20px;">{{passenger.gender | upper}}</td>
                            <td style="width: 25%; padding-left: 20px;">{{ticket1.seat_class | upper}}</td>
                        </tr>
                    {% endif %}
                {% endfor %}
                    
            </table>
            <table class="table">
                <tr class="tr-caption">
                    <td style="width: 100%; padding-left: 20px;">FLIGHT INFORMATION</td>
                </tr>
            </table>
            <table cellspacing='0'>
                <tr class="tr-odd">
                    <th>FLIGHT</th>
                    <th>DEPART/ARRIVE</th>
                    <th>AIRPORT/TERMINAL</th>
                </tr>
                <tr class="tr-even">
                    <td style="width: 29%; padding-left: 20px;">{{ticket1.flight.airline | upper}}<br>{{ticket1.flight.plane | upper}}</td>
                    <td style="width: 22%; padding-left: 20px;">{{ticket1.flight_ddate | date:'d M y' | upper}}<br>{{ticket1.flight.depart_time | time:'Hi'}}</td>
                    <td style="width: 49%; padding-left: 20px;">{{ticket1.flight.origin.airport | upper}} ({{ticket1.flight.origin.code | upper}})</td>
                </tr>
                <tr class="tr-odd">
                    <td style="width: 29%; padding-left: 20px;"></td>
                    <td style="width: 22%; padding-left: 20px;">{{ticket1.flight_adate | date:'d M y' | upper}}<br>{{ticket1.flight.arrival_time | time:'Hi'}}</td>
                    <td style="width: 49%; padding-left: 20px;">{{ticket1.flight.destination.airport | upper}} ({{ticket1.flight.destination.code | upper}})</td>
                </tr>
            </table>
            {% if ticket2 %}
                <div>
                    <hr style="height: .1px; border: 0; background-color: grey;" noshade>
                    <table style="margin-top: 0;" cellspacing='0'>
                        <tr class="tr-odd">
                            <th>FLIGHT</th>
                            <th>DEPART/ARRIVE</th>
                            <th>AIRPORT/TERMINAL</th>
                        </tr>
                        <tr class="tr-even">
                            <td style="padding-left: 20px; width: 29%;">{{ticket2.flight.airline | upper}}<br>{{ticket2.flight.plane | upper}}</td>
                            <td style="padding-left: 20px; width: 22%;">{{ticket2.flight_ddate | date:'d M y' | upper}}<br>{{ticket2.flight.depart_time | time:'Hi'}}</td>
                            <td style="padding-left: 20px; width: 49%;">{{ticket2.flight.origin.airport | upper}} ({{ticket2.flight.origin.code | upper}})</td>
                        </tr>
                        <tr class="tr-odd">
                            <td style="padding-left: 20px; width: 29%;"></td>
                            <td style="padding-left: 20px; width: 22%;">{{ticket2.flight_adate | date:'d M y' | upper}}<br>{{ticket2.flight.arrival_time | time:'Hi'}}</td>
                            <td style="padding-left: 20px; width: 49%;">{{ticket2.flight.destination.airport | upper}} ({{ticket2.flight.destination.code | upper}})</td>
                        </tr>
                    </table>
                    <hr style="height: .1px; border: 0; background-color: grey;" noshade>
                </div>
            {% endif %}
            <!---->
            <table class="table">
                <tr class="tr-caption">
                    <td style="width: 100%;">FARE DETAILS</td>
                </tr>
            </table>
            <table cellspacing='0' style="width: 100vw;">
                <tr class="tr-odd">
                    <th style="width: 35%;">FARE</th>
                    <td style="width: 65%;">INR {{ticket1.flight_fare}}</td>
                </tr>
                <tr class="tr-even">
                    <th style="width: 35%;">CHARGES</th>
                    <td style="width: 65%;">INR {{ticket1.other_charges}}</td>
                </tr>
                <tr class="tr-odd">
                    <th style="width: 35%;">DISCOUNT</th>
                    <td style="width: 65%;">INR (-) {{ticket1.coupon_discount}}</td>
                </tr>
                <tr class="tr-even">
                    <th style="width: 35%;">TOTAL</th>
                    <td style="width: 65%;">INR {{ticket1.total_fare}}</td>
                </tr>
            </table>
        </div>
    </main>
    <p style="margin: 10px 0; font-size: .8em;">&#169;	 {{ current_year}} Flight Inc. All rights reserved.</p>
    <!-- 30 Kgs Check-in, 7 Kgs Cabin-->
</body>
</html>

init.py


admin.py:
from django.contrib import admin

from .models import *

# Register your models here.

admin.site.register(Place)
admin.site.register(Week)
admin.site.register(Flight)
admin.site.register(Passenger)
admin.site.register(User)
admin.site.register(Ticket)

apps.py:
from django.apps import AppConfig


class FlightConfig(AppConfig):
    name = 'flight'


constant.py
FEE = 100.0

models.py
from django.db import models
from django.contrib.auth.models import AbstractUser

from datetime import datetime

# Create your models here.

class User(AbstractUser):
    def __str__(self):
        return f"{self.id}: {self.first_name} {self.last_name}"

class Place(models.Model):
    city = models.CharField(max_length=64)
    airport = models.CharField(max_length=64)
    code = models.CharField(max_length=3)
    country = models.CharField(max_length=64)

    def __str__(self):
        return f"{self.city}, {self.country} ({self.code})"


class Week(models.Model):
    number = models.IntegerField()
    name = models.CharField(max_length=16)

    def __str__(self):
        return f"{self.name} ({self.number})"


class Flight(models.Model):
    origin = models.ForeignKey(Place, on_delete=models.CASCADE, related_name="departures")
    destination = models.ForeignKey(Place, on_delete=models.CASCADE, related_name="arrivals")
    depart_time = models.TimeField(auto_now=False, auto_now_add=False)
    depart_day = models.ManyToManyField(Week, related_name="flights_of_the_day")
    duration = models.DurationField(null=True)
    arrival_time = models.TimeField(auto_now=False, auto_now_add=False)
    plane = models.CharField(max_length=24)
    airline = models.CharField(max_length=64)
    economy_fare = models.FloatField(null=True)
    business_fare = models.FloatField(null=True)
    first_fare = models.FloatField(null=True)

    def __str__(self):
        return f"{self.id}: {self.origin} to {self.destination}"



GENDER = (
    ('male','MALE'),    #(actual_value, human_readable_value)
    ('female','FEMALE')
)

class Passenger(models.Model):
    first_name = models.CharField(max_length=64, blank=True)
    last_name = models.CharField(max_length=64, blank=True)
    gender = models.CharField(max_length=20, choices=GENDER, blank=True)
    #passenger = models.ForeignKey(User, on_delete=models.CASCADE, related_name="flights")
    #flight = models.ForeignKey(Flight, on_delete=models.CASCADE, related_name="passengers")

    def __str__(self):
        return f"Passenger: {self.first_name} {self.last_name}, {self.gender}"



SEAT_CLASS = (
    ('economy', 'Economy'),
    ('business', 'Business'),
    ('first', 'First')
)

TICKET_STATUS =(
    ('PENDING', 'Pending'),
    ('CONFIRMED', 'Confirmed'),
    ('CANCELLED', 'Cancelled')
)

class Ticket(models.Model):
    user = models.ForeignKey(User,on_delete=models.CASCADE,related_name="bookings", blank=True, null=True)
    ref_no = models.CharField(max_length=6, unique=True)
    passengers = models.ManyToManyField(Passenger, related_name="flight_tickets")
    flight = models.ForeignKey(Flight, on_delete=models.CASCADE, related_name="tickets", blank=True, null=True)
    flight_ddate = models.DateField(blank=True, null=True)
    flight_adate = models.DateField(blank=True, null=True)
    flight_fare = models.FloatField(blank=True,null=True)
    other_charges = models.FloatField(blank=True,null=True)
    coupon_used = models.CharField(max_length=15,blank=True)
    coupon_discount = models.FloatField(default=0.0)
    total_fare = models.FloatField(blank=True, null=True)
    seat_class = models.CharField(max_length=20, choices=SEAT_CLASS)
    booking_date = models.DateTimeField(default=datetime.now)
    mobile = models.CharField(max_length=20,blank=True)
    email = models.EmailField(max_length=45, blank=True)
    status = models.CharField(max_length=45, choices=TICKET_STATUS)

    def __str__(self):
        return self.ref_no

tests.py
from django.test import TestCase

# Create your tests here.


urls.py
from django.urls import path
from . import views

urlpatterns = [
    path("", views.index, name="index"),
    path("login", views.login_view, name="login"),
    path("logout", views.logout_view, name="logout"),
    path("register", views.register_view, name="register"),
    path("query/places/<str:q>", views.query, name="query"),
    path("flight", views.flight, name="flight"),
    path("review", views.review, name="review"),
    path("flight/ticket/book", views.book, name="book"),
    path("flight/ticket/payment", views.payment, name="payment"),
    path('flight/ticket/api/<str:ref>', views.ticket_data, name="ticketdata"),
    path('flight/ticket/print',views.get_ticket, name="getticket"),
    path('flight/bookings', views.bookings, name="bookings"),
    path('flight/ticket/cancel', views.cancel_ticket, name="cancelticket"),
    path('flight/ticket/resume', views.resume_booking, name="resumebooking"),
    path('contact', views.contact, name="contact"),
    path('privacy-policy', views.privacy_policy, name="privacypolicy"),
    path('terms-and-conditions', views.terms_and_conditions, name="termsandconditions"),
    path('about-us', views.about_us, name="aboutus"),
]

utils.py
from datetime import timedelta, datetime
from flight.models import *
from .models import Week, Place, Flight
from tqdm import tqdm

def get_number_of_lines(file):
    with open(file) as f:
        for i, l in enumerate(f):
            pass
    return i + 1

def createWeekDays():
    days = ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday']
    for i,day in enumerate(days):
        Week.objects.create(number=i, name=day)

def addPlaces():
    file = open("./Data/airports.csv", "r")
    print("Adding Airports...")
    total = get_number_of_lines("./Data/airports.csv")
    for i, line in tqdm(enumerate(file), total=total):
        if i == 0:
            continue
        data = line.split(',')
        city = data[0].strip()
        airport = data[1].strip()
        code = data[2].strip()
        country = data[3].strip()
        try:
            Place.objects.create(city=city, airport=airport, code=code, country=country)
        except Exception as e:
            continue
    print("Done.\n")

def addDomesticFlights():
    file = open("./Data/domestic_flights.csv", "r")
    print("Adding Domestic Flights...")
    total = get_number_of_lines("./Data/domestic_flights.csv")
    for i, line in tqdm(enumerate(file), total=total):
        if i == 0:
            continue
        data = line.split(',')
        origin = data[1].strip()
        destination = data[2].strip()
        depart_time = datetime.strptime(data[3].strip(), "%H:%M:%S").time()
        depart_week = int(data[4].strip())
        duration = timedelta(hours=int(data[5].strip()[:2]), minutes=int(data[5].strip()[3:5]))
        arrive_time = datetime.strptime(data[6].strip(), "%H:%M:%S").time()
        arrive_week = int(data[7].strip())
        flight_no = data[8].strip()
        airline = data[10].strip()
        economy_fare = float(data[11].strip()) if data[11].strip() else 0.0
        business_fare = float(data[12].strip()) if data[12].strip() else 0.0
        first_fare = float(data[13].strip()) if data[13].strip() else 0.0

        try:
            a1 = Flight.objects.create(origin=Place.objects.get(code=origin), destination=Place.objects.get(code=destination), depart_time=depart_time , duration=duration, arrival_time=arrive_time, plane=flight_no, airline=airline, economy_fare=economy_fare, business_fare=business_fare, first_fare=first_fare)
            a1.depart_day.add(Week.objects.get(number=depart_week))
            a1.save()
        except Exception as e:
            print(e)
            return
    print("Done.\n")

def addInternationalFlights():
    file = open("./Data/international_flights.csv", "r")
    print("Adding International Flights...")
    total = get_number_of_lines("./Data/international_flights.csv")
    for i, line in tqdm(enumerate(file), total=total):
        if i == 0:
            continue
        data = line.split(',')
        origin = data[1].strip()
        destination = data[2].strip()
        depart_time = datetime.strptime(data[3].strip(), "%H:%M:%S").time()
        depart_week = int(data[4].strip())
        duration = timedelta(hours=int(data[5].strip()[:2]), minutes=int(data[5].strip()[3:5]))
        arrive_time = datetime.strptime(data[6].strip(), "%H:%M:%S").time()
        arrive_week = int(data[7].strip())
        flight_no = data[8].strip()
        airline = data[10].strip()
        economy_fare = float(data[11].strip()) if data[11].strip() else 0.0
        business_fare = float(data[12].strip()) if data[12].strip() else 0.0
        first_fare = float(data[13].strip()) if data[13].strip() else 0.0

        try:
            a1 = Flight.objects.create(origin=Place.objects.get(code=origin), destination=Place.objects.get(code=destination), depart_time=depart_time , duration=duration, arrival_time=arrive_time, plane=flight_no, airline=airline, economy_fare=economy_fare, business_fare=business_fare, first_fare=first_fare)
            a1.depart_day.add(Week.objects.get(number=depart_week))
            a1.save()
        except Exception as e:
            print(e)
            return
    print("Done.\n")


views.py
from django.shortcuts import render, HttpResponse, HttpResponseRedirect
from django.urls import reverse
from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
from django.contrib.auth import authenticate, login, logout

from datetime import datetime
import math
from .models import *
from capstone.utils import render_to_pdf, createticket


#Fee and Surcharge variable
from .constant import FEE
from flight.utils import createWeekDays, addPlaces, addDomesticFlights, addInternationalFlights

try:
    if len(Week.objects.all()) == 0:
        createWeekDays()

    if len(Place.objects.all()) == 0:
        addPlaces()

    if len(Flight.objects.all()) == 0:
        print("Do you want to add flights in the Database? (y/n)")
        if input().lower() in ['y', 'yes']:
            addDomesticFlights()
            addInternationalFlights()
except:
    pass

# Create your views here.

def index(request):
    min_date = f"{datetime.now().date().year}-{datetime.now().date().month}-{datetime.now().date().day}"
    max_date = f"{datetime.now().date().year if (datetime.now().date().month+3)<=12 else datetime.now().date().year+1}-{(datetime.now().date().month + 3) if (datetime.now().date().month+3)<=12 else (datetime.now().date().month+3-12)}-{datetime.now().date().day}"
    if request.method == 'POST':
        origin = request.POST.get('Origin')
        destination = request.POST.get('Destination')
        depart_date = request.POST.get('DepartDate')
        seat = request.POST.get('SeatClass')
        trip_type = request.POST.get('TripType')
        if(trip_type == '1'):
            return render(request, 'flight/index.html', {
            'origin': origin,
            'destination': destination,
            'depart_date': depart_date,
            'seat': seat.lower(),
            'trip_type': trip_type
        })
        elif(trip_type == '2'):
            return_date = request.POST.get('ReturnDate')
            return render(request, 'flight/index.html', {
            'min_date': min_date,
            'max_date': max_date,
            'origin': origin,
            'destination': destination,
            'depart_date': depart_date,
            'seat': seat.lower(),
            'trip_type': trip_type,
            'return_date': return_date
        })
    else:
        return render(request, 'flight/index.html', {
            'min_date': min_date,
            'max_date': max_date
        })

def login_view(request):
    if request.method == "POST":
        username = request.POST["username"]
        password = request.POST["password"]
        user = authenticate(request, username=username, password=password)
        if user is not None:
            login(request, user)
            return HttpResponseRedirect(reverse("index"))
            
        else:
            return render(request, "flight/login.html", {
                "message": "Invalid username and/or password."
            })
    else:
        if request.user.is_authenticated:
            return HttpResponseRedirect(reverse('index'))
        else:
            return render(request, "flight/login.html")

def register_view(request):
    if request.method == "POST":
        fname = request.POST['firstname']
        lname = request.POST['lastname']
        username = request.POST["username"]
        email = request.POST["email"]

        # Ensuring password matches confirmation
        password = request.POST["password"]
        confirmation = request.POST["confirmation"]
        if password != confirmation:
            return render(request, "flight/register.html", {
                "message": "Passwords must match."
            })

        # Attempt to create new user
        try:
            user = User.objects.create_user(username, email, password)
            user.first_name = fname
            user.last_name = lname
            user.save()
        except:
            return render(request, "flight/register.html", {
                "message": "Username already taken."
            })
        login(request, user)
        return HttpResponseRedirect(reverse("index"))
    else:
        return render(request, "flight/register.html")

def logout_view(request):
    logout(request)
    return HttpResponseRedirect(reverse("index"))

def query(request, q):
    places = Place.objects.all()
    filters = []
    q = q.lower()
    for place in places:
        if (q in place.city.lower()) or (q in place.airport.lower()) or (q in place.code.lower()) or (q in place.country.lower()):
            filters.append(place)
    return JsonResponse([{'code':place.code, 'city':place.city, 'country': place.country} for place in filters], safe=False)

@csrf_exempt
def flight(request):
    o_place = request.GET.get('Origin')
    d_place = request.GET.get('Destination')
    trip_type = request.GET.get('TripType')
    departdate = request.GET.get('DepartDate')
    depart_date = datetime.strptime(departdate, "%Y-%m-%d")
    return_date = None
    if trip_type == '2':
        returndate = request.GET.get('ReturnDate')
        return_date = datetime.strptime(returndate, "%Y-%m-%d")
        flightday2 = Week.objects.get(number=return_date.weekday()) ##
        origin2 = Place.objects.get(code=d_place.upper())   ##
        destination2 = Place.objects.get(code=o_place.upper())  ##
    seat = request.GET.get('SeatClass')

    flightday = Week.objects.get(number=depart_date.weekday())
    destination = Place.objects.get(code=d_place.upper())
    origin = Place.objects.get(code=o_place.upper())
    if seat == 'economy':
        flights = Flight.objects.filter(depart_day=flightday,origin=origin,destination=destination).exclude(economy_fare=0).order_by('economy_fare')
        try:
            max_price = flights.last().economy_fare
            min_price = flights.first().economy_fare
        except:
            max_price = 0
            min_price = 0

        if trip_type == '2':    ##
            flights2 = Flight.objects.filter(depart_day=flightday2,origin=origin2,destination=destination2).exclude(economy_fare=0).order_by('economy_fare')    ##
            try:
                max_price2 = flights2.last().economy_fare   ##
                min_price2 = flights2.first().economy_fare  ##
            except:
                max_price2 = 0  ##
                min_price2 = 0  ##
                
    elif seat == 'business':
        flights = Flight.objects.filter(depart_day=flightday,origin=origin,destination=destination).exclude(business_fare=0).order_by('business_fare')
        try:
            max_price = flights.last().business_fare
            min_price = flights.first().business_fare
        except:
            max_price = 0
            min_price = 0

        if trip_type == '2':    ##
            flights2 = Flight.objects.filter(depart_day=flightday2,origin=origin2,destination=destination2).exclude(business_fare=0).order_by('business_fare')    ##
            try:
                max_price2 = flights2.last().business_fare   ##
                min_price2 = flights2.first().business_fare  ##
            except:
                max_price2 = 0  ##
                min_price2 = 0  ##

    elif seat == 'first':
        flights = Flight.objects.filter(depart_day=flightday,origin=origin,destination=destination).exclude(first_fare=0).order_by('first_fare')
        try:
            max_price = flights.last().first_fare
            min_price = flights.first().first_fare
        except:
            max_price = 0
            min_price = 0
            
        if trip_type == '2':    ##
            flights2 = Flight.objects.filter(depart_day=flightday2,origin=origin2,destination=destination2).exclude(first_fare=0).order_by('first_fare')
            try:
                max_price2 = flights2.last().first_fare   ##
                min_price2 = flights2.first().first_fare  ##
            except:
                max_price2 = 0  ##
                min_price2 = 0  ##    ##

    #print(calendar.day_name[depart_date.weekday()])
    if trip_type == '2':
        return render(request, "flight/search.html", {
            'flights': flights,
            'origin': origin,
            'destination': destination,
            'flights2': flights2,   ##
            'origin2': origin2,    ##
            'destination2': destination2,    ##
            'seat': seat.capitalize(),
            'trip_type': trip_type,
            'depart_date': depart_date,
            'return_date': return_date,
            'max_price': math.ceil(max_price/100)*100,
            'min_price': math.floor(min_price/100)*100,
            'max_price2': math.ceil(max_price2/100)*100,    ##
            'min_price2': math.floor(min_price2/100)*100    ##
        })
    else:
        return render(request, "flight/search.html", {
            'flights': flights,
            'origin': origin,
            'destination': destination,
            'seat': seat.capitalize(),
            'trip_type': trip_type,
            'depart_date': depart_date,
            'return_date': return_date,
            'max_price': math.ceil(max_price/100)*100,
            'min_price': math.floor(min_price/100)*100
        })

def review(request):
    flight_1 = request.GET.get('flight1Id')
    date1 = request.GET.get('flight1Date')
    seat = request.GET.get('seatClass')
    round_trip = False
    if request.GET.get('flight2Id'):
        round_trip = True

    if round_trip:
        flight_2 = request.GET.get('flight2Id')
        date2 = request.GET.get('flight2Date')

    if request.user.is_authenticated:
        flight1 = Flight.objects.get(id=flight_1)
        flight1ddate = datetime(int(date1.split('-')[2]),int(date1.split('-')[1]),int(date1.split('-')[0]),flight1.depart_time.hour,flight1.depart_time.minute)
        flight1adate = (flight1ddate + flight1.duration)
        flight2 = None
        flight2ddate = None
        flight2adate = None
        if round_trip:
            flight2 = Flight.objects.get(id=flight_2)
            flight2ddate = datetime(int(date2.split('-')[2]),int(date2.split('-')[1]),int(date2.split('-')[0]),flight2.depart_time.hour,flight2.depart_time.minute)
            flight2adate = (flight2ddate + flight2.duration)
        #print("//////////////////////////////////")
        #print(f"flight1ddate: {flight1adate-flight1ddate}")
        #print("//////////////////////////////////")
        if round_trip:
            return render(request, "flight/book.html", {
                'flight1': flight1,
                'flight2': flight2,
                "flight1ddate": flight1ddate,
                "flight1adate": flight1adate,
                "flight2ddate": flight2ddate,
                "flight2adate": flight2adate,
                "seat": seat,
                "fee": FEE
            })
        return render(request, "flight/book.html", {
            'flight1': flight1,
            "flight1ddate": flight1ddate,
            "flight1adate": flight1adate,
            "seat": seat,
            "fee": FEE
        })
    else:
        return HttpResponseRedirect(reverse("login"))

def book(request):
    if request.method == 'POST':
        if request.user.is_authenticated:
            flight_1 = request.POST.get('flight1')
            flight_1date = request.POST.get('flight1Date')
            flight_1class = request.POST.get('flight1Class')
            f2 = False
            if request.POST.get('flight2'):
                flight_2 = request.POST.get('flight2')
                flight_2date = request.POST.get('flight2Date')
                flight_2class = request.POST.get('flight2Class')
                f2 = True
            countrycode = request.POST['countryCode']
            mobile = request.POST['mobile']
            email = request.POST['email']
            flight1 = Flight.objects.get(id=flight_1)
            if f2:
                flight2 = Flight.objects.get(id=flight_2)
            passengerscount = request.POST['passengersCount']
            passengers=[]
            for i in range(1,int(passengerscount)+1):
                fname = request.POST[f'passenger{i}FName']
                lname = request.POST[f'passenger{i}LName']
                gender = request.POST[f'passenger{i}Gender']
                passengers.append(Passenger.objects.create(first_name=fname,last_name=lname,gender=gender.lower()))
            coupon = request.POST.get('coupon')
            
            try:
                ticket1 = createticket(request.user,passengers,passengerscount,flight1,flight_1date,flight_1class,coupon,countrycode,email,mobile)
                if f2:
                    ticket2 = createticket(request.user,passengers,passengerscount,flight2,flight_2date,flight_2class,coupon,countrycode,email,mobile)

                if(flight_1class == 'Economy'):
                    if f2:
                        fare = (flight1.economy_fare*int(passengerscount))+(flight2.economy_fare*int(passengerscount))
                    else:
                        fare = flight1.economy_fare*int(passengerscount)
                elif (flight_1class == 'Business'):
                    if f2:
                        fare = (flight1.business_fare*int(passengerscount))+(flight2.business_fare*int(passengerscount))
                    else:
                        fare = flight1.business_fare*int(passengerscount)
                elif (flight_1class == 'First'):
                    if f2:
                        fare = (flight1.first_fare*int(passengerscount))+(flight2.first_fare*int(passengerscount))
                    else:
                        fare = flight1.first_fare*int(passengerscount)
            except Exception as e:
                return HttpResponse(e)
            

            if f2:    ##
                return render(request, "flight/payment.html", { ##
                    'fare': fare+FEE,   ##
                    'ticket': ticket1.id,   ##
                    'ticket2': ticket2.id   ##
                })  ##
            return render(request, "flight/payment.html", {
                'fare': fare+FEE,
                'ticket': ticket1.id
            })
        else:
            return HttpResponseRedirect(reverse("login"))
    else:
        return HttpResponse("Method must be post.")

def payment(request):
    if request.user.is_authenticated:
        if request.method == 'POST':
            ticket_id = request.POST['ticket']
            t2 = False
            if request.POST.get('ticket2'):
                ticket2_id = request.POST['ticket2']
                t2 = True
            fare = request.POST.get('fare')
            card_number = request.POST['cardNumber']
            card_holder_name = request.POST['cardHolderName']
            exp_month = request.POST['expMonth']
            exp_year = request.POST['expYear']
            cvv = request.POST['cvv']

            try:
                ticket = Ticket.objects.get(id=ticket_id)
                ticket.status = 'CONFIRMED'
                ticket.booking_date = datetime.now()
                ticket.save()
                if t2:
                    ticket2 = Ticket.objects.get(id=ticket2_id)
                    ticket2.status = 'CONFIRMED'
                    ticket2.save()
                    return render(request, 'flight/payment_process.html', {
                        'ticket1': ticket,
                        'ticket2': ticket2
                    })
                return render(request, 'flight/payment_process.html', {
                    'ticket1': ticket,
                    'ticket2': ""
                })
            except Exception as e:
                return HttpResponse(e)
        else:
            return HttpResponse("Method must be post.")
    else:
        return HttpResponseRedirect(reverse('login'))


def ticket_data(request, ref):
    ticket = Ticket.objects.get(ref_no=ref)
    return JsonResponse({
        'ref': ticket.ref_no,
        'from': ticket.flight.origin.code,
        'to': ticket.flight.destination.code,
        'flight_date': ticket.flight_ddate,
        'status': ticket.status
    })

@csrf_exempt
def get_ticket(request):
    ref = request.GET.get("ref")
    ticket1 = Ticket.objects.get(ref_no=ref)
    data = {
        'ticket1':ticket1,
        'current_year': datetime.now().year
    }
    pdf = render_to_pdf('flight/ticket.html', data)
    return HttpResponse(pdf, content_type='application/pdf')


def bookings(request):
    if request.user.is_authenticated:
        tickets = Ticket.objects.filter(user=request.user).order_by('-booking_date')
        return render(request, 'flight/bookings.html', {
            'page': 'bookings',
            'tickets': tickets
        })
    else:
        return HttpResponseRedirect(reverse('login'))

@csrf_exempt
def cancel_ticket(request):
    if request.method == 'POST':
        if request.user.is_authenticated:
            ref = request.POST['ref']
            try:
                ticket = Ticket.objects.get(ref_no=ref)
                if ticket.user == request.user:
                    ticket.status = 'CANCELLED'
                    ticket.save()
                    return JsonResponse({'success': True})
                else:
                    return JsonResponse({
                        'success': False,
                        'error': "User unauthorised"
                    })
            except Exception as e:
                return JsonResponse({
                    'success': False,
                    'error': e
                })
        else:
            return HttpResponse("User unauthorised")
    else:
        return HttpResponse("Method must be POST.")

def resume_booking(request):
    if request.method == 'POST':
        if request.user.is_authenticated:
            ref = request.POST['ref']
            ticket = Ticket.objects.get(ref_no=ref)
            if ticket.user == request.user:
                return render(request, "flight/payment.html", {
                    'fare': ticket.total_fare,
                    'ticket': ticket.id
                })
            else:
                return HttpResponse("User unauthorised")
        else:
            return HttpResponseRedirect(reverse("login"))
    else:
        return HttpResponse("Method must be post.")

def contact(request):
    return render(request, 'flight/contact.html')

def privacy_policy(request):
    return render(request, 'flight/privacy-policy.html')

def terms_and_conditions(request):
    return render(request, 'flight/terms.html')

def about_us(request):
    return render(request, 'flight/about.html')


manage.py:
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'capstone.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()


procfile:
web: gunicorn capstone.wsgi







